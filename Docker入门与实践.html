<!-- build time:Sun Nov 15 2020 23:19:14 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><script>!function(){var t,e="在线分享网";document.addEventListener("visibilitychange",function(){document.hidden?(document.title="您去哪里了！",clearTimeout(t)):(document.title="在线分享网欢迎您",t=setTimeout(function(){document.title=e},2e3))})}()</script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script></script><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/icon.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/icon.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/icon.png?v=5.1.4"><link rel="mask-icon" href="/icon.png?v=5.1.4" color="#222"><meta name="keywords" content="集装箱,容器化部署,"><link rel="alternate" href="/atom.xml" title="在线分享网" type="application/atom+xml"><meta name="description" content="Docker参考资料官方文档：https://docs.docker.com/docker-for-windows/【官方文档超级详细】仓库地址：https://hub.docker.com/【发布到仓库，git pull push】前期基础linux基本命令，类似cd，mkdir等Docker概述Docker为什么会出现一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题尤其对于机"><meta name="keywords" content="集装箱,容器化部署"><meta property="og:type" content="article"><meta property="og:title" content="Docker入门与实践"><meta property="og:url" content="https://me.obey.fun/Docker入门与实践.html"><meta property="og:site_name" content="在线分享网"><meta property="og:description" content="Docker参考资料官方文档：https://docs.docker.com/docker-for-windows/【官方文档超级详细】仓库地址：https://hub.docker.com/【发布到仓库，git pull push】前期基础linux基本命令，类似cd，mkdir等Docker概述Docker为什么会出现一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题尤其对于机"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfmfpbin9j30uu09ztah.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfmykjjxwj30nt0hv0tm.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfn0cu23wj30oc0i0jsa.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfn31miccj30uh0gmwlj.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfncyxs3nj314r0lb0vb.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfnfm4w61j30px0jqabc.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfngbxbt3j30tl0pidm3.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnhsvjn9j30jz0cx776.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnjc6mb8j30vr071jru.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfnke1aphj30v50d2759.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkfnlmkq53j30m40ektco.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfnnv9qifj31ed0jxwgn.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkfnplgg9cj30n60fm406.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfnqiht15j31dr05nt8y.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnrq5rwdj30y30jzalf.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfnt074wfj31hm0s3adp.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfnuuj0xfj31em0rvjua.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnw7qnjfj31600rgacu.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkfnxjinqbj30zw0cqt9e.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkfnypprokj30mq0bggmg.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfo0li42gj30i708uwgz.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfo1wutdaj313b0mttb9.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfnqiht15j31dr05nt8y.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfotcpp6bj310f06c0sy.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfouujccsj31fs0tkwhz.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfovot9a5j31f20s7wiy.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfozmv3o2j312t0g9aba.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfp3o509pj314e0au752.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkfp60wq89j311x06ljrq.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfp6uczf9j30y50omq4y.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkfp8jmhkxj310m0fz40f.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhkqoxp4wj30zd086dg6.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhks6hbooj310m0eawfn.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhkslrzj4j310p0k60uk.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhkt16d7sj310t09yjry.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhktkm8sxj310i09ut95.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhkvrp9oyj30lc0azguz.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhkwpalbrj30t50ki7ct.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhkx97yk0j30xf0jeqme.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhkxpdvgbj30vq0byaky.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhky619t8j30ux01mtaf.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhl7voxaoj311i0e4wfy.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlbnt4inj30rf0kumz1.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlcr2uwoj30h707iaa2.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhld75t7sj316d0ivab9.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhldq4jgtj31610f5dia.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhlmxmye5j30ym0jawgy.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn//006MOU0zgy1gkhlnldbxyj30u90lvth1.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhloc2536j30v70p5qdz.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhlpbwz9aj31aj0fk401.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlpsck0hj30rh0avwf5.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlqbmpdcj31ar0hotau.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlqs9wpej317v0i20ui.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlr8409sj313s043glx.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlrmc6vqj31810lgjun.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhls2tegmj30ot0hltag.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlsijpzjj31fz0sywlo.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhlsy1uhcj31370aemyb.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhltrzp8oj318703jaa3.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlu5mccvj319608tgn1.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhluu7amjj31a7034wen.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhlwt9hfgj319y03bt8w.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhlx9b1wjj319t059t8x.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhlxpn9orj31ac06qmxn.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhly4h0llj30mr09yglz.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlzav3s1j31a007z0tc.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlzrfr46j31d10o8wg1.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhm0vl3t0j31ea0sbdis.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhm1e4l3cj31ag08gdgl.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhm21sawoj31dk0p80vy.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki1rhskmbj30nv080tdt.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki1t5voazj30h20anq4u.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki1tlz287j30h108qabj.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki1vg0tmij30vv0gbgpu.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki1vy1c2vj30vx0ga796.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki1wybfcbj30th04wmyz.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki1xngk7nj31a30mztby.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki1y6prbjj31gn0o341d.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gki1z1sc3rj30q809bmy0.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki1zh3vfvj31ek0matdt.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gki1zy1k0ej31ag0hnmzn.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki25i511fj30ha0bfabm.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2jreecrj31a505x3zb.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2kf42wkj31ef0msq55.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2kt4983j30o708htbg.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2l7pl99j31ae0s2ads.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2lm22ozj30q40kraby.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2m1idxwj31bk0psdma.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2meiof4j30mk0igwha.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2mu4uxrj30mt0csq3t.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gki2ncxp0kj30vw0m27d8.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2nqu5nzj30w10aadje.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2od603cj31gj0sdtbg.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2p2q42kj313z09sdgj.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2pj2vhwj311t0hh0ug.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2pyphk1j30gt0bsdfv.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gki2qcpvitj30l40bjdft.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2qs4hi3j31490gjdhd.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2r5q0q9j310z08kgmg.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2rlndwwj31300jntau.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2t7fm6vj314f0ogdhm.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2tjcy1pj314q0hljse.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2tv7r1tj314s076gmf.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2uae9zwj30sf08hjt7.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2untmw4j30ub0hddgx.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2x2t5ulj310g0lfwgo.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2xv26z7j30m401z0sm.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2zs8rmjj31120g0777.jpg"><meta property="og:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki307lyexj310h072dgh.jpg"><meta property="og:image" content="https://tva2.sinaimg.cn/large/006MOU0zgy1gki30l4f5ej30mi04p74h.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3ojc6ilj31bq0tqq6i.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki3oyut7uj30nu0c2ae8.jpg"><meta property="og:image" content="http://www.yunweipai.com/wp-content/uploads/2016/09/171.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3sq4dqcj30gw078t8x.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gki3t16owkj30u00abjs1.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3twnv2rj30ml0f874l.jpg"><meta property="og:image" content="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3ugk96rj30wr0ieta9.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki3ut2qj3j30ml0hjgmr.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3v7cag2j30zl08p754.jpg"><meta property="og:image" content="https://tva4.sinaimg.cn/large/006MOU0zgy1gki3vkpu34j30p20e73zh.jpg"><meta property="og:image" content="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki3vyj8u7j318t0jt76v.jpg"><meta property="og:image" content="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3wgsh4cj30va0lc45g.jpg"><meta property="og:image" content="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki3wtes2bj30vc0bzdkk.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006MOU0zgy1gki3x78l4zj30vb0fq10z.jpg"><meta property="og:updated_time" content="2020-11-09T03:27:46.536Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Docker入门与实践"><meta name="twitter:description" content="Docker参考资料官方文档：https://docs.docker.com/docker-for-windows/【官方文档超级详细】仓库地址：https://hub.docker.com/【发布到仓库，git pull push】前期基础linux基本命令，类似cd，mkdir等Docker概述Docker为什么会出现一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题尤其对于机"><meta name="twitter:image" content="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfmfpbin9j30uu09ztah.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"2931888f"}),daovoice("update")</script><link rel="canonical" href="https://me.obey.fun/Docker入门与实践.html"><title>Docker入门与实践 | 在线分享网</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div id="particles-js"></div><div class="container sidebar-position-left page-post-detail"><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">在线分享网</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">分享，成为你我之间的快乐！</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档 <span class="badge">52</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签 <span class="badge">41</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类 <span class="badge">39</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-comments"></i><br>留言板</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-address-book-o"></i><br>友情链接</a></li><li class="menu-item menu-item-share"><a href="https://www.52share.online" rel="section"><i class="menu-item-icon fa fa-fw fa-hand-o-right"></i><br>资源分享</a></li><li class="menu-item menu-item-topx"><a href="/topx/" rel="section"><i class="menu-item-icon fa fa-fw fa-line-chart"></i><br>热度排序</a></li><li id="search" class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><div id="lanye_popup_bg" onclick="lanye_popup_closebox()" style="display:none"></div><div class="lanye_popup_top"><a style="border-bottom:0" href="javascript:lanye_popup_box();" target="_blank" rel="external nofollow"></a><div class="lanye_popup_closetop"></div></div><script async src="/js/src/ribbon.js" type="text/javascript"></script><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://me.obey.fun/Docker入门与实践.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="HuiProgramer"><meta itemprop="description" content=""><meta itemprop="image" content="https://huiprogramer.gitee.io/medias/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="在线分享网"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Docker入门与实践</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-10-24T17:46:04+08:00">2020-10-24 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2020-11-09T11:27:46+08:00">2020-11-09 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/容器化技术/" itemprop="url" rel="index"><span itemprop="name">容器化技术</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/容器化技术/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span>评论: <span id="sourceId::Docker入门与实践" class="cy_cmt_count"></span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">7.9k 字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">36 分钟 </span><span id="/Docker入门与实践.html" class="leancloud_visitors" data-flag-title="Docker入门与实践"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-thermometer-1"></i> </span><span class="post-meta-item-text">热度&#58;</span> <span class="leancloud-visitors-count"></span> <span>℃</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfmfpbin9j30uu09ztah.jpg" alt="image-20200606203310614" referrerpolicy="no-referrer"></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>官方文档：<a href="https://docs.docker.com/docker-for-windows/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-windows/</a></p><p>【官方文档超级详细】</p><p>仓库地址：<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p><p>【发布到仓库，git pull push】</p><h2 id="前期基础"><a href="#前期基础" class="headerlink" title="前期基础"></a>前期基础</h2><p>linux基本命令，类似cd，mkdir等</p><h2 id="Docker概述"><a href="#Docker概述" class="headerlink" title="Docker概述"></a>Docker概述</h2><h3 id="Docker为什么会出现"><a href="#Docker为什么会出现" class="headerlink" title="Docker为什么会出现"></a>Docker为什么会出现</h3><p>一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题</p><p>尤其对于机器学习和深度学习的库更是如此，很可能存在版本问题、底层依赖冲突问题</p><p>所以发布项目时，不只是一套代码过去，而是代码+环境整体打包过去</p><p>所谓开发即运维，保证系统稳定性，提高部署效率</p><p>使用Docker后的流程：</p><p>开发：建立模型–环境–打包带上环境，即镜像–放到Docker仓库</p><p>部署：下载Docker中的镜像，直接运行即可</p><p>Docker的思想来自于集装箱，集装箱，对环境进行隔离</p><p>Docker通过隔离机制，可以将服务器利用到极致。</p><h3 id="Docker的历史"><a href="#Docker的历史" class="headerlink" title="Docker的历史"></a>Docker的历史</h3><p>2010年，几个搞IT的人，在美国成立一家公司<code>dotCloud</code></p><p>做一些pass的云计算服务</p><p>他们将自己的容器化技术命名为Docker</p><p>Docker基于Go语言开发</p><p>Docker刚刚诞生的时候，没有引起行业的注意，dotCloud活不下去</p><p>然后他们决定开源</p><p>2013年，创始人将Docker开源，不开则以，一开惊人，刚开源的时候，每个月都会更新一个版本</p><p>2014年4月9日，Docker 1.0发布</p><h3 id="容器vs虚拟机"><a href="#容器vs虚拟机" class="headerlink" title="容器vs虚拟机"></a>容器vs虚拟机</h3><p>在容器技术出来之前，用的是虚拟机技术</p><h4 id="虚拟机原理示意图"><a href="#虚拟机原理示意图" class="headerlink" title="虚拟机原理示意图"></a>虚拟机原理示意图</h4><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfmykjjxwj30nt0hv0tm.jpg" alt="image-20200606205436434" referrerpolicy="no-referrer"><br>缺点：</p><ol><li><p>资源占用多</p></li><li><p>冗余步骤多</p></li><li><p>启动很慢</p></li></ol><p>容器化技术示意图<br>不是模拟的完整的操作系统<br><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfn0cu23wj30oc0i0jsa.jpg" alt="image-20200606205739655" referrerpolicy="no-referrer"></p><h4 id="二者对比"><a href="#二者对比" class="headerlink" title="二者对比"></a>二者对比</h4><p>比较虚拟机和Docker的不同</p><table><thead><tr><th></th><th>传统虚拟机</th><th>Docker</th></tr></thead><tbody><tr><td>虚拟内容</td><td>硬件+完整的操作系统+软件</td><td>APP+LIB</td></tr><tr><td>大小</td><td>笨重，通常几个G</td><td>轻便几个M或KB</td></tr><tr><td>启动速度</td><td>慢，分钟级</td><td>快，秒级</td></tr><tr><td></td><td></td></tr></tbody></table><h2 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h2><h3 id="Docker的基本组成"><a href="#Docker的基本组成" class="headerlink" title="Docker的基本组成"></a>Docker的基本组成</h3><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfn31miccj30uh0gmwlj.jpg" alt="image-20200606212250845" referrerpolicy="no-referrer"></p><p>明确几个概念：</p><ol><li><p>镜像(image)：docker镜像好比一个模板，可以通过这个模板来创建容器(container)，一个镜像可以创建多个容器，类似Python中的Class</p></li><li><p>容器(container)：类似Python中通过Class创建的实例，Object；容器可以理解为一个简易的系统</p></li><li><p>仓库(repository)：存放镜像的地方，分为共有仓库和私有仓库</p><ul><li>Docker Hub：国外的</li><li>阿里云：配置镜像加速</li></ul></li></ol><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>我们要有一台服务器，并且可以操作它</p><ol><li>Linux命令基础，购买linux阿里云的服务器</li><li>CentOS 7</li><li>使用Xshell链接远程服务器</li></ol><h3 id="安装xshell"><a href="#安装xshell" class="headerlink" title="安装xshell"></a>安装xshell</h3><p>下载CentOS7 <a href="https://www.jianshu.com/p/a63f47e096e8" target="_blank" rel="noopener">https://www.jianshu.com/p/a63f47e096e8</a></p><p>下载VMware</p><p>VMware配置虚拟机 <a href="https://blog.csdn.net/babyxue/article/details/80970526" target="_blank" rel="noopener">https://blog.csdn.net/babyxue/article/details/80970526</a></p><p>xshell链接服务器 <a href="https://blog.csdn.net/zzy1078689276/article/details/77280814" target="_blank" rel="noopener">https://blog.csdn.net/zzy1078689276/article/details/77280814</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# cd /</span><br><span class="line">[root@192 /]# pwd</span><br><span class="line">/</span><br><span class="line">[root@192 /]# ls</span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@192 /]# uname -r</span><br><span class="line">3.10.0-1127.el7.x86_64</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfncyxs3nj314r0lb0vb.jpg" alt="image-20200608091950655" referrerpolicy="no-referrer"></p><p>查看ip：vmware里面输入，ip addr</p><h3 id="Centos安装"><a href="#Centos安装" class="headerlink" title="Centos安装"></a>Centos安装</h3><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">https://docs.docker.com/engine/install/centos/</a></p><h3 id="卸载旧的版本"><a href="#卸载旧的版本" class="headerlink" title="卸载旧的版本"></a>卸载旧的版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 卸载旧的版本</span><br><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfnfm4w61j30px0jqabc.jpg" alt="image-20200608092628498" referrerpolicy="no-referrer"></p><h3 id="安装基本环境"><a href="#安装基本环境" class="headerlink" title="安装基本环境"></a>安装基本环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装基本的安装包</span><br><span class="line">$ sudo yum install -y yum-utils</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfngbxbt3j30tl0pidm3.jpg" alt="image-20200608093040366" referrerpolicy="no-referrer"></p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnhsvjn9j30jz0cx776.jpg" alt="image-20200608093114774" referrerpolicy="no-referrer"></p><h3 id="设置镜像的仓库"><a href="#设置镜像的仓库" class="headerlink" title="设置镜像的仓库"></a>设置镜像的仓库</h3><p>注意！！下载默认用国外的，太慢不要用！</p><p>用国内镜像，百度搜索，docker的阿里云镜像地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不要用官网默认这个！</span></span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo <span class="comment"># 默认是国外的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 换成下面的</span></span><br><span class="line"></span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo <span class="comment"># 阿里云镜像</span></span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnjc6mb8j30vr071jru.jpg" alt="image-20200616145430166" referrerpolicy="no-referrer"></p><p>直接复制粘贴就OK了</p><p>更像软件包索引</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfnke1aphj30v50d2759.jpg" alt="image-20200616150014082" referrerpolicy="no-referrer"></p><p>没有问题的话就是可以用的</p><h3 id="安装docker引擎"><a href="#安装docker引擎" class="headerlink" title="安装docker引擎"></a>安装docker引擎</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io <span class="comment"># docker-ce 社区版 ee 企业版</span></span><br></pre></td></tr></table></figure><p>注意这里会有几个个y/n的判断，直接同意即可，或者安装直接加<code>-y</code>参数。</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkfnlmkq53j30m40ektco.jpg" alt="image-20200616150818860" referrerpolicy="no-referrer"></p><h3 id="启动Docker"><a href="#启动Docker" class="headerlink" title="启动Docker"></a>启动Docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker # 代表启动成功</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e61f3</span><br><span class="line"> Built:             Mon Jun  1 09:13:48 2020</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e61f3</span><br><span class="line">  Built:            Mon Jun  1 09:12:26 2020</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfnnv9qifj31ed0jxwgn.jpg" alt="image-20200616151641013" referrerpolicy="no-referrer"></p><p>中间一堆是签名信息（sha256加密）</p><p>run的运行流程图<br><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkfnplgg9cj30n60fm406.jpg" alt="image-20200616161441669" referrerpolicy="no-referrer"></p><p>查看下载的镜像</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfnqiht15j31dr05nt8y.jpg" alt="image-20200616151913277" referrerpolicy="no-referrer"></p><h3 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载Docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 卸载依赖</span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line"></span><br><span class="line"># 删除资源</span><br><span class="line">rm -rf /var/lib/docker # docker 的默认工作路径</span><br></pre></td></tr></table></figure><h3 id="阿里云镜像加速"><a href="#阿里云镜像加速" class="headerlink" title="阿里云镜像加速"></a>阿里云镜像加速</h3><p>支付宝扫码登录，短信验证，确认授权</p><p>我有两个问题</p><ol><li><p>阿里云镜像加速必须配置嘛？</p><blockquote><p>加速快</p><p>要是翻墙就无所谓了</p></blockquote></li><li><p>这个阿里云必须要买嘛，买哪个，我看阿里云好多产品</p><blockquote><p>不需要买</p><p>免费的</p><p>阿里云搜索容器服务</p><p>有一个镜像加速</p></blockquote></li><li>这个地址是哪来的呀</li></ol><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnrq5rwdj30y30jzalf.jpg" alt="image-20200616154429105" referrerpolicy="no-referrer"><br><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfnt074wfj31hm0s3adp.jpg" alt="image-20200616154455964" referrerpolicy="no-referrer"><br><strong>控制台搜索 容器镜像服务</strong><br><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkfnuuj0xfj31em0rvjua.jpg" alt="image-20200616155201285" referrerpolicy="no-referrer"><br><strong>找到加速地址</strong><br><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfnw7qnjfj31600rgacu.jpg" alt="image-20200616155600567" referrerpolicy="no-referrer"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker <span class="comment"># 创建一个陌路</span></span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://uyfgafsw.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF <span class="comment"># 编写配置文件</span></span><br><span class="line"></span><br><span class="line">sudo systemctl daemon-reload <span class="comment"># 重启服务</span></span><br><span class="line">sudo systemctl restart docker <span class="comment"># 重启docker</span></span><br></pre></td></tr></table></figure><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkfnxjinqbj30zw0cqt9e.jpg" alt="image-20200616160315298" referrerpolicy="no-referrer"></p><p>Docker是真么工作的？</p><p>Docker是一个Client-Server结构的系统，Docker的守护进程在主机上。通过Socket从客户端访问！</p><p>DockerServer接受到Docker-Client的指令，<br><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkfnypprokj30mq0bggmg.jpg" alt="image-20200616162107363" referrerpolicy="no-referrer"></p><p>Docker为什么比VM快？</p><ol><li>Docker有着比虚拟机更少的抽象层</li><li>docker主要用的是宿主机的内核，vm需要Guest OS</li></ol><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfo0li42gj30i708uwgz.jpg" alt="image-20200616162302653" referrerpolicy="no-referrer"></p><p>所以说新建一个容器的时候，docker不需要像虚拟机一样重新加载一个操作系统内核，避免引导</p><h2 id="Docker命令"><a href="#Docker命令" class="headerlink" title="Docker命令"></a>Docker命令</h2><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version # 显示docker的基本信息</span><br><span class="line">docker info # 系统信息，镜像和容器的数量</span><br><span class="line">docker 命令 --help # 全部信息</span><br></pre></td></tr></table></figure><p><a href="https://docs.docker.com/reference/" target="_blank" rel="noopener">官网文档</a></p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfo1wutdaj313b0mttb9.jpg" alt="image-20200616163338187" referrerpolicy="no-referrer"></p><h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><h4 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h4><p>查看所有本地主机上的镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]<span class="comment"># docker images</span></span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfnqiht15j31dr05nt8y.jpg" alt="image-20200616151913277" referrerpolicy="no-referrer"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 解释</span><br><span class="line">REPOSITORY  # 镜像仓库源</span><br><span class="line">TAG                 # 镜像的标签</span><br><span class="line">IMAGE ID           # 镜像的ID</span><br><span class="line">CREATED           # 镜像的创建时间</span><br><span class="line">SIZE # 镜像的大小</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--all , -a		Show all images (default hides intermediate images) <span class="comment"># 显示所有</span></span><br><span class="line">--digests		Show digests</span><br><span class="line">--filter , -f		Filter output based on conditions provided</span><br><span class="line">--format		Pretty-print images using a Go template</span><br><span class="line">--no-trunc		Don’t truncate output</span><br><span class="line">--quiet , -q		Only show numeric IDs <span class="comment"># 只显示id</span></span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkfotcpp6bj310f06c0sy.jpg" alt="image-20200616172651835" referrerpolicy="no-referrer"></p><h4 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h4><p>搜索仓库中的镜像，相当于网页搜索</p><p><a href="http://hub.docker.com" target="_blank" rel="noopener">网页搜索</a></p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfouujccsj31fs0tkwhz.jpg" alt="image-20200616173009473" referrerpolicy="no-referrer"><br><strong>mysql</strong><br><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfovot9a5j31f20s7wiy.jpg" alt="image-20200616173050756" referrerpolicy="no-referrer"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkfozmv3o2j312t0g9aba.jpg" alt="image-20200616173308194" referrerpolicy="no-referrer"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search --help</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkfp3o509pj314e0au752.jpg" alt="image-20200616173740981" referrerpolicy="no-referrer"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解释</span></span><br><span class="line">Options:</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided</span><br><span class="line">      --format string   Pretty-print search using a Go template</span><br><span class="line">      --<span class="built_in">limit</span> int       Max number of search results (default 25)</span><br><span class="line">      --no-trunc        Don<span class="string">'t truncate output</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql --filter=STARS=3000 # 搜索出Stars大于3000的</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkfp60wq89j311x06ljrq.jpg" alt="image-20200616174440284" referrerpolicy="no-referrer"></p><h4 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h4><p>下载镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql <span class="comment"># 下载mysql镜像，default tag，默认最新版latest</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]<span class="comment"># sudo systemctl daemon-reload</span></span><br><span class="line">[root@192 ~]<span class="comment"># sudo systemctl restart docker</span></span><br><span class="line">[root@192 ~]<span class="comment"># docker pull mysql</span></span><br><span class="line">Using default tag: latest <span class="comment"># 不写tag默认最新版</span></span><br><span class="line">latest: Pulling from library/mysql</span><br><span class="line">8559a31e96f4: Pull complete  <span class="comment"># layer 分层下载，docker image的核心 联合文件系统</span></span><br><span class="line">d51ce1c2e575: Pull complete </span><br><span class="line">c2344adc4858: Pull complete </span><br><span class="line">fcf3ceff18fc: Pull complete </span><br><span class="line">16da0c38dc5b: Pull complete </span><br><span class="line">b905d1797e97: Pull complete </span><br><span class="line">4b50d1c6b05c: Pull complete </span><br><span class="line">c75914a65ca2: Pull complete </span><br><span class="line">1ae8042bdd09: Pull complete </span><br><span class="line">453ac13c00a3: Pull complete </span><br><span class="line">9e680cd72f08: Pull complete </span><br><span class="line">a6b5dc864b6c: Pull complete </span><br><span class="line">Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6<span class="comment">#签名</span></span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> mysql:latest</span><br><span class="line">docker.io/library/mysql:latest <span class="comment"># 真实地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 即</span></span><br><span class="line">docker pull mysql</span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">docker pull docker.io/library/mysql:latest</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定版本下载 </span></span><br><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p>版本来自于官网，版本库<a href="https://hub.docker.com/_/mysql" target="_blank" rel="noopener">https://hub.docker.com/_/mysql</a></p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkfp6uczf9j30y50omq4y.jpg" alt="image-20200617094339687" referrerpolicy="no-referrer"></p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkfp8jmhkxj310m0fz40f.jpg" alt="image-20200617100948088" referrerpolicy="no-referrer"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>此时查看镜像，可以看到新下载的两个</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhkqoxp4wj30zd086dg6.jpg" alt="image-20200617101105899" referrerpolicy="no-referrer"></p><h4 id="docker-rmi"><a href="#docker-rmi" class="headerlink" title="docker rmi"></a>docker rmi</h4><p>remove images</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除一个 可以通过名称 也可以指定id -f表示删除所有</span></span><br><span class="line">docker rmi -f 9cfcce23593a</span><br><span class="line"><span class="comment"># 删除多个 用空格分隔id</span></span><br><span class="line">docker rmi -f id id id</span><br><span class="line"><span class="comment"># 删除所有 </span></span><br><span class="line">docker rmi -f $(docker images -aq) <span class="comment"># images -aq就是查所有镜像id，从而递归删除</span></span><br></pre></td></tr></table></figure><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhks6hbooj310m0eawfn.jpg" alt="image-20200617102049613" referrerpolicy="no-referrer"></p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhkslrzj4j310p0k60uk.jpg" alt="image-20200617102126526" referrerpolicy="no-referrer"></p><h3 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h3><p>说明：有了镜像才能创建容器，linux，下载一个centos镜像来测试学习</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhkt16d7sj310t09yjry.jpg" alt="image-20200617103406974" referrerpolicy="no-referrer"></p><h4 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明</span></span><br><span class="line">--name=“Name” # 容器名字，用于区分容器</span><br><span class="line">-d 后台方式运行</span><br><span class="line">-it 使用交互方式运行，进入容器查看内容</span><br><span class="line">-p 指定容器的端口 如-p 8080::8080</span><br><span class="line">	-p ip:主机端口：容器端口</span><br><span class="line">	-p 主机端口:容器端口</span><br><span class="line">	-p 容器端口</span><br><span class="line">	</span><br><span class="line">-p 随机指定端口</span><br></pre></td></tr></table></figure><h4 id="进入退出容器"><a href="#进入退出容器" class="headerlink" title="进入退出容器"></a>进入退出容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入</span></span><br><span class="line">docker run -it centos /bin/bash </span><br><span class="line"><span class="comment"># 查看目录</span></span><br><span class="line">ls</span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhktkm8sxj310i09ut95.jpg" alt="image-20200617104004004" referrerpolicy="no-referrer"></p><p>注意这里面主机名，编程了centos的id</p><p>这里面就是一个容器，套娃啊</p><h4 id="查看运行的容器"><a href="#查看运行的容器" class="headerlink" title="查看运行的容器"></a>查看运行的容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查看正在运行的容器</span><br><span class="line">docker ps</span><br><span class="line"># 查看曾经运行的容器</span><br><span class="line">docker ps -a</span><br><span class="line"># 显示最近创建的容器，设置显示个数</span><br><span class="line">docker ps -a - n=? </span><br><span class="line"># 只显示容器的编号</span><br><span class="line">docker ps -aq</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@192 ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">9939864fa2e6        centos              "bin/bash"          4 minutes ago       Exited (0) 4 minutes ago                       unruffled_knuth</span><br><span class="line">5f42e9930435        centos              "/bin/bash"         8 minutes ago       Exited (0) 4 minutes ago                       lucid_cannon</span><br><span class="line">a89ddb393d3d        bf756fb1ae65        "/hello"            19 hours ago        Exited (0) 19 hours ago                        gracious_bhabha</span><br><span class="line">[root@192 ~]# docker ps -a -n=2</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">9939864fa2e6        centos              "bin/bash"          6 minutes ago       Exited (0) 6 minutes ago                       unruffled_knuth</span><br><span class="line">5f42e9930435        centos              "/bin/bash"         10 minutes ago      Exited (0) 7 minutes ago </span><br><span class="line">[root@192 ~]# docker ps -aq</span><br><span class="line">9939864fa2e6</span><br><span class="line">5f42e9930435</span><br><span class="line">a89ddb393d3d</span><br></pre></td></tr></table></figure><h4 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 容器停止退出</span></span><br><span class="line">exit</span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器不停止退出 注意必须在英文输入法下，中文输入法不行</span></span><br><span class="line">Ctrl + P + Q</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@bfcea13c40cd /]# [root@192 ~]# docker ps ##注意这里会自动给个命令，删掉</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES</span><br><span class="line">bfcea13c40cd        centos              "/bin/bash"         About a minute ago   Up About a minute                       stoic_wilson</span><br><span class="line">edbd9366d959        centos              "/bin/bash"         7 minutes ago        Up 7 minutes                            affectionate_bartik</span><br><span class="line">[root@192 ~]# docker exec -it edbd9366d959 /bin/bash ## 再次进入</span><br><span class="line">[root@edbd9366d959 /]# exit ##停止并推出</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h4 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除指定容器 不能删除正在运行的容器，如果强制删除 rm -f</span></span><br><span class="line">docker rm 容器id</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有容器</span></span><br><span class="line">docker rm -f $(docker ps -aq)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有容器</span></span><br><span class="line">docker ps -a -q|xargs docker rm</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">bfcea13c40cd        centos              "/bin/bash"         29 minutes ago      Up 29 minutes                                   stoic_wilson</span><br><span class="line">edbd9366d959        centos              "/bin/bash"         35 minutes ago      Up 35 minutes                                   affectionate_bartik</span><br><span class="line">9939864fa2e6        centos              "bin/bash"          48 minutes ago      Exited (0) 48 minutes ago                       unruffled_knuth</span><br><span class="line">5f42e9930435        centos              "/bin/bash"         52 minutes ago      Exited (0) 49 minutes ago                       lucid_cannon</span><br><span class="line">a89ddb393d3d        bf756fb1ae65        "/hello"            20 hours ago        Exited (0) 20 hours ago                         gracious_bhabha</span><br><span class="line">[root@192 ~]# docker rm 5f42e9930435</span><br><span class="line">5f42e9930435</span><br><span class="line">[root@192 ~]# docker rm edbd9366d959      # 注意正在运行的容器不能删除</span><br><span class="line">Error response from daemon: You cannot remove a running container edbd9366d9596c744dd449119269b04de2f2a494e7fc471f6396bcefd94c33fe. Stop the container before attempting removal or force remove</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker ps -aq # 所有容器id</span><br><span class="line">bfcea13c40cd</span><br><span class="line">edbd9366d959</span><br><span class="line">9939864fa2e6</span><br><span class="line">a89ddb393d3d</span><br><span class="line">[root@192 ~]# docker rm -f $(docker ps -aq) # 全部删除</span><br><span class="line">bfcea13c40cd</span><br><span class="line">edbd9366d959</span><br><span class="line">9939864fa2e6</span><br><span class="line">a89ddb393d3d</span><br></pre></td></tr></table></figure><h4 id="启动和停止容器的操作"><a href="#启动和停止容器的操作" class="headerlink" title="启动和停止容器的操作"></a>启动和停止容器的操作</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start</span><br><span class="line">docker restart</span><br><span class="line">docker stop</span><br><span class="line">docker kill</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@7b1a7dd10ea4 /]# exit</span><br><span class="line">exit</span><br><span class="line">[root@192 ~]# docker ps #查看正在运行的</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@192 ~]# docker ps -a # 查看历史运行过的</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">7b1a7dd10ea4        centos              "/bin/bash"         54 seconds ago      Exited (0) 42 seconds ago                       fervent_mirzakhani</span><br><span class="line">[root@192 ~]# docker start 7b1a7dd10ea4 # 启动当前这个容器 container id 粘过 来</span><br><span class="line">7b1a7dd10ea4</span><br><span class="line">[root@192 ~]# docker ps # 查看当前运行容器 发现启动成功</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">7b1a7dd10ea4        centos              "/bin/bash"         2 minutes ago       Up 28 seconds                           fervent_mirzakhani</span><br><span class="line">[root@192 ~]# docker stop 7b1a7dd10ea4 # 停止运行</span><br><span class="line">7b1a7dd10ea4</span><br><span class="line">[root@192 ~]# docker ps # 再次查看 没有这个容器了</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure><h3 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h3><h4 id="后台启动docker"><a href="#后台启动docker" class="headerlink" title="后台启动docker"></a>后台启动docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d 镜像名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 用docker ps 查看的时候 发现停止了</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 后台运行，docker发现前台没有，容器启动后，发现自己没有提供服务，会立刻停止</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Last login: Wed Jun 17 19:47:35 2020</span><br><span class="line">[root@192 ~]# systemctl start docker # 关机后重启了，需要启动docker</span><br><span class="line">[root@192 ~]# docker run -d centos # 运行</span><br><span class="line">8ce188e5fee31c2fac93c0a405ee1a95c38dbc50cb47c35b19c0039c27558ded</span><br><span class="line">[root@192 ~]# docker ps -a # 查看正在运行的</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">8ce188e5fee3        centos              "/bin/bash"         19 seconds ago      Exited (0) 18 seconds ago                       tender_dirac</span><br><span class="line">7b1a7dd10ea4        centos              "/bin/bash"         8 hours ago         Exited (0) 8 hours ago                          fervent_mirzakhani</span><br></pre></td></tr></table></figure><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs</span><br><span class="line">docker logs -f -t --tail n 【id】</span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhkvrp9oyj30lc0azguz.jpg" alt="image-20200617161744298" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker logs --help</span><br><span class="line"></span><br><span class="line">Usage:	docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow log output</span><br><span class="line">      --since string   Show logs since timestamp (e.g.</span><br><span class="line">                       2013-01-02T13:23:37) or relative</span><br><span class="line">                       (e.g. 42m for 42 minutes)</span><br><span class="line">      --tail string    Number of lines to show from the</span><br><span class="line">                       end of the logs (default "all")</span><br><span class="line">  -t, --timestamps     Show timestamps # 时间戳</span><br><span class="line">      --until string   Show logs before a timestamp (e.g.</span><br><span class="line">                       2013-01-02T13:23:37) or relative</span><br><span class="line">                       (e.g. 42m for 42 minutes)</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whiel true;do echo shenzai;sleep</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 运行一个</span></span><br><span class="line">[root@192 ~]# docker run -it centos /bin/bash</span><br><span class="line"></span><br><span class="line">[root@c2887d35c71d /]# [root@192 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">c2887d35c71d        centos              "/bin/bash"         57 seconds ago      Up 56 seconds                           vigorous_kare</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看日志，由于没有运行脚本，所以啥也没显示</span></span><br><span class="line">[root@192 ~]# docker logs -f -t --tail 10 c2887d35c71d</span><br><span class="line">^C # ctrl+c退出</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行centos里面加个脚本</span></span><br><span class="line">[root@192 ~]# docker run -d centos /bin/sh -c "while true;do echo shenzai;sleep 1;done"</span><br><span class="line">cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388</span><br><span class="line"></span><br><span class="line">[root@192 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">cb6d7fbc3f27        centos              "/bin/sh -c 'while t…"   7 seconds ago       Up 6 seconds                            dreamy_almeida</span><br><span class="line">c2887d35c71d        centos              "/bin/bash"              3 minutes ago       Up 3 minutes                            vigorous_kare</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看日志 发现隔一秒打印一条</span></span><br><span class="line">[root@192 ~]# docker logs -f -t --tail 10 cb6d7fbc3f27</span><br><span class="line">2020-06-17T12:02:11.293765084Z shenzai</span><br><span class="line">2020-06-17T12:02:12.297675608Z shenzai</span><br><span class="line">2020-06-17T12:02:13.301845582Z shenzai</span><br><span class="line">2020-06-17T12:02:14.304800996Z shenzai</span><br><span class="line">2020-06-17T12:02:15.307130238Z shenzai</span><br><span class="line">2020-06-17T12:02:16.310574235Z shenzai</span><br><span class="line">2020-06-17T12:02:17.312946923Z shenzai</span><br><span class="line">2020-06-17T12:02:18.314841295Z shenzai</span><br><span class="line">2020-06-17T12:02:19.317021705Z shenzai</span><br><span class="line">2020-06-17T12:02:20.319670013Z shenzai</span><br><span class="line">2020-06-17T12:02:21.322651649Z shenzai</span><br><span class="line">2020-06-17T12:02:22.325466918Z shenzai</span><br><span class="line">2020-06-17T12:02:23.327984704Z shenzai</span><br><span class="line">2020-06-17T12:02:24.329656919Z shenzai</span><br></pre></td></tr></table></figure><h4 id="查看正在运行的容器信息"><a href="#查看正在运行的容器信息" class="headerlink" title="查看正在运行的容器信息"></a>查看正在运行的容器信息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line">[root@192 ~]# docker inspect cb6d7fbc3f27</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        # 容器的完整id</span><br><span class="line">        "Id": "cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388",</span><br><span class="line">        </span><br><span class="line">        # 创建时间</span><br><span class="line">        "Created": "2020-06-17T12:00:50.706906186Z",</span><br><span class="line">        </span><br><span class="line">        # 脚本位置</span><br><span class="line">        "Path": "/bin/sh",</span><br><span class="line">        </span><br><span class="line">        # 运行的脚本</span><br><span class="line">        "Args": [</span><br><span class="line">            "-c",</span><br><span class="line">            "while true;do echo shenzai;sleep 1;done"</span><br><span class="line">        ],</span><br><span class="line">        "State": &#123;</span><br><span class="line">            "Status": "running", # 状态，正在运行</span><br><span class="line">            "Running": true,</span><br><span class="line">            "Paused": false,</span><br><span class="line">            "Restarting": false,</span><br><span class="line">            "OOMKilled": false,</span><br><span class="line">            "Dead": false,</span><br><span class="line">            "Pid": 1909, # 父进程id</span><br><span class="line">            "ExitCode": 0,</span><br><span class="line">            "Error": "",</span><br><span class="line">            "StartedAt": "2020-06-17T12:00:51.093617477Z",</span><br><span class="line">            "FinishedAt": "0001-01-01T00:00:00Z"</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        # 来源镜像</span><br><span class="line">        "Image": "sha256:831691599b88ad6cc2a4abbd0e89661a121aff14cfa289ad840fd3946f274f1f",</span><br><span class="line">        "ResolvConfPath": "/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/resolv.conf",</span><br><span class="line">        "HostnamePath": "/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hostname",</span><br><span class="line">        "HostsPath": "/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hosts",</span><br><span class="line">        "LogPath": "/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388-json.log",</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        "Name": "/dreamy_almeida",</span><br><span class="line">        "RestartCount": 0,</span><br><span class="line">        "Driver": "overlay2",</span><br><span class="line">        "Platform": "linux",</span><br><span class="line">        "MountLabel": "",</span><br><span class="line">        "ProcessLabel": "",</span><br><span class="line">        "AppArmorProfile": "",</span><br><span class="line">        "ExecIDs": null,</span><br><span class="line">        </span><br><span class="line">        # 主机配置</span><br><span class="line">        "HostConfig": &#123;</span><br><span class="line">            "Binds": null,</span><br><span class="line">            "ContainerIDFile": "",</span><br><span class="line">            "LogConfig": &#123;</span><br><span class="line">                "Type": "json-file",</span><br><span class="line">                "Config": &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            "NetworkMode": "default",</span><br><span class="line">            "PortBindings": &#123;&#125;,</span><br><span class="line">            "RestartPolicy": &#123;</span><br><span class="line">                "Name": "no",</span><br><span class="line">                "MaximumRetryCount": 0</span><br><span class="line">            &#125;,</span><br><span class="line">            "AutoRemove": false,</span><br><span class="line">            "VolumeDriver": "",</span><br><span class="line">            "VolumesFrom": null,</span><br><span class="line">            "CapAdd": null,</span><br><span class="line">            "CapDrop": null,</span><br><span class="line">            "Capabilities": null,</span><br><span class="line">            "Dns": [],</span><br><span class="line">            "DnsOptions": [],</span><br><span class="line">            "DnsSearch": [],</span><br><span class="line">            "ExtraHosts": null,</span><br><span class="line">            "GroupAdd": null,</span><br><span class="line">            "IpcMode": "private",</span><br><span class="line">            "Cgroup": "",</span><br><span class="line">            "Links": null,</span><br><span class="line">            "OomScoreAdj": 0,</span><br><span class="line">            "PidMode": "",</span><br><span class="line">            "Privileged": false,</span><br><span class="line">            "PublishAllPorts": false,</span><br><span class="line">            "ReadonlyRootfs": false,</span><br><span class="line">            "SecurityOpt": null,</span><br><span class="line">            "UTSMode": "",</span><br><span class="line">            "UsernsMode": "",</span><br><span class="line">            "ShmSize": 67108864,</span><br><span class="line">            "Runtime": "runc",</span><br><span class="line">            "ConsoleSize": [</span><br><span class="line">                0,</span><br><span class="line">                0</span><br><span class="line">            ],</span><br><span class="line">            "Isolation": "",</span><br><span class="line">            "CpuShares": 0,</span><br><span class="line">            "Memory": 0,</span><br><span class="line">            "NanoCpus": 0,</span><br><span class="line">            "CgroupParent": "",</span><br><span class="line">            "BlkioWeight": 0,</span><br><span class="line">            "BlkioWeightDevice": [],</span><br><span class="line">            "BlkioDeviceReadBps": null,</span><br><span class="line">            "BlkioDeviceWriteBps": null,</span><br><span class="line">            "BlkioDeviceReadIOps": null,</span><br><span class="line">            "BlkioDeviceWriteIOps": null,</span><br><span class="line">            "CpuPeriod": 0,</span><br><span class="line">            "CpuQuota": 0,</span><br><span class="line">            "CpuRealtimePeriod": 0,</span><br><span class="line">            "CpuRealtimeRuntime": 0,</span><br><span class="line">            "CpusetCpus": "",</span><br><span class="line">            "CpusetMems": "",</span><br><span class="line">            "Devices": [],</span><br><span class="line">            "DeviceCgroupRules": null,</span><br><span class="line">            "DeviceRequests": null,</span><br><span class="line">            "KernelMemory": 0,</span><br><span class="line">            "KernelMemoryTCP": 0,</span><br><span class="line">            "MemoryReservation": 0,</span><br><span class="line">            "MemorySwap": 0,</span><br><span class="line">            "MemorySwappiness": null,</span><br><span class="line">            "OomKillDisable": false,</span><br><span class="line">            "PidsLimit": null,</span><br><span class="line">            "Ulimits": null,</span><br><span class="line">            "CpuCount": 0,</span><br><span class="line">            "CpuPercent": 0,</span><br><span class="line">            "IOMaximumIOps": 0,</span><br><span class="line">            "IOMaximumBandwidth": 0,</span><br><span class="line">            "MaskedPaths": [</span><br><span class="line">                "/proc/asound",</span><br><span class="line">                "/proc/acpi",</span><br><span class="line">                "/proc/kcore",</span><br><span class="line">                "/proc/keys",</span><br><span class="line">                "/proc/latency_stats",</span><br><span class="line">                "/proc/timer_list",</span><br><span class="line">                "/proc/timer_stats",</span><br><span class="line">                "/proc/sched_debug",</span><br><span class="line">                "/proc/scsi",</span><br><span class="line">                "/sys/firmware"</span><br><span class="line">            ],</span><br><span class="line">            "ReadonlyPaths": [</span><br><span class="line">                "/proc/bus",</span><br><span class="line">                "/proc/fs",</span><br><span class="line">                "/proc/irq",</span><br><span class="line">                "/proc/sys",</span><br><span class="line">                "/proc/sysrq-trigger"</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        # 其他配置</span><br><span class="line">        "GraphDriver": &#123;</span><br><span class="line">            "Data": &#123;</span><br><span class="line">                "LowerDir": "/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907-init/diff:/var/lib/docker/overlay2/7f79322e0f58d651a84a555dadd83d92537788172525945d3f538dd95dce336c/diff",</span><br><span class="line">                "MergedDir": "/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/merged",</span><br><span class="line">                "UpperDir": "/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/diff",</span><br><span class="line">                "WorkDir": "/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/work"</span><br><span class="line">            &#125;,</span><br><span class="line">            "Name": "overlay2"</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        "Mounts": [], # 挂载</span><br><span class="line">        </span><br><span class="line">        # 基本配置</span><br><span class="line">        "Config": &#123;</span><br><span class="line">            "Hostname": "cb6d7fbc3f27",</span><br><span class="line">            "Domainname": "",</span><br><span class="line">            "User": "",</span><br><span class="line">            "AttachStdin": false,</span><br><span class="line">            "AttachStdout": false,</span><br><span class="line">            "AttachStderr": false,</span><br><span class="line">            "Tty": false,</span><br><span class="line">            "OpenStdin": false,</span><br><span class="line">            "StdinOnce": false,</span><br><span class="line">            "Env": [</span><br><span class="line">                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span><br><span class="line">            ], # 基本环境变量，这里没有Java</span><br><span class="line">            </span><br><span class="line">            # 基本命令</span><br><span class="line">            "Cmd": [</span><br><span class="line">                "/bin/sh",</span><br><span class="line">                "-c",</span><br><span class="line">                "while true;do echo shenzai;sleep 1;done"</span><br><span class="line">            ],</span><br><span class="line">            "Image": "centos",</span><br><span class="line">            "Volumes": null,</span><br><span class="line">            "WorkingDir": "",</span><br><span class="line">            "Entrypoint": null,</span><br><span class="line">            "OnBuild": null,</span><br><span class="line">            "Labels": &#123;</span><br><span class="line">                "org.label-schema.build-date": "20200611",</span><br><span class="line">                "org.label-schema.license": "GPLv2",</span><br><span class="line">                "org.label-schema.name": "CentOS Base Image",</span><br><span class="line">                "org.label-schema.schema-version": "1.0",</span><br><span class="line">                "org.label-schema.vendor": "CentOS"</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        # 网卡，比如现在用的是桥接的网卡</span><br><span class="line">        "NetworkSettings": &#123;</span><br><span class="line">            "Bridge": "",</span><br><span class="line">            "SandboxID": "4d701985d7e77aa153790b697b2f38a61e20555c224b7675e4bf650b82799882",</span><br><span class="line">            "HairpinMode": false,</span><br><span class="line">            "LinkLocalIPv6Address": "",</span><br><span class="line">            "LinkLocalIPv6PrefixLen": 0,</span><br><span class="line">            "Ports": &#123;&#125;,</span><br><span class="line">            "SandboxKey": "/var/run/docker/netns/4d701985d7e7",</span><br><span class="line">            "SecondaryIPAddresses": null,</span><br><span class="line">            "SecondaryIPv6Addresses": null,</span><br><span class="line">            "EndpointID": "8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018",</span><br><span class="line">            "Gateway": "172.17.0.1",</span><br><span class="line">            "GlobalIPv6Address": "",</span><br><span class="line">            "GlobalIPv6PrefixLen": 0,</span><br><span class="line">            "IPAddress": "172.17.0.3",</span><br><span class="line">            "IPPrefixLen": 16,</span><br><span class="line">            "IPv6Gateway": "",</span><br><span class="line">            "MacAddress": "02:42:ac:11:00:03",</span><br><span class="line">            "Networks": &#123;</span><br><span class="line">                "bridge": &#123;</span><br><span class="line">                    "IPAMConfig": null,</span><br><span class="line">                    "Links": null,</span><br><span class="line">                    "Aliases": null,</span><br><span class="line">                    "NetworkID": "22b0fd2290ccbc4e066a75d3f01bd8bf32ee4352c5bbcfc9f911287219219571",</span><br><span class="line">                    "EndpointID": "8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018",</span><br><span class="line">                    "Gateway": "172.17.0.1",</span><br><span class="line">                    "IPAddress": "172.17.0.3",</span><br><span class="line">                    "IPPrefixLen": 16,</span><br><span class="line">                    "IPv6Gateway": "",</span><br><span class="line">                    "GlobalIPv6Address": "",</span><br><span class="line">                    "GlobalIPv6PrefixLen": 0,</span><br><span class="line">                    "MacAddress": "02:42:ac:11:00:03",</span><br><span class="line">                    "DriverOpts": null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 停止正在疯狂输出的那个容器</span></span><br><span class="line">[root@192 ~]# docker stop cb6d7fbc3f27</span><br><span class="line">cb6d7fbc3f27</span><br></pre></td></tr></table></figure><h4 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="headerlink" title="进入当前正在运行的容器"></a>进入当前正在运行的容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 我们通常容器都是使用后台方式运行的e</span></span><br><span class="line"></span><br><span class="line">docker exec -it 容器id bashSHELL</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试</span></span><br><span class="line">[root@192 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">c2887d35c71d        centos              "/bin/bash"         35 minutes ago      Up 35 minutes                           vigorous_kare</span><br><span class="line">[root@192 ~]# docker exec -it c2887d35c71d /bin/bash</span><br><span class="line">[root@c2887d35c71d /]# ls</span><br><span class="line">bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var</span><br><span class="line">dev  home  lib64  media       opt  root  sbin  sys  usr</span><br><span class="line">[root@c2887d35c71d /]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 11:57 pts/0    00:00:00 /bin/bash</span><br><span class="line">root         14      0  0 12:32 pts/1    00:00:00 /bin/bash</span><br><span class="line">root         28     14  0 12:32 pts/1    00:00:00 ps -ef</span><br><span class="line">[root@c2887d35c71d /]# c2887d35c71d</span><br><span class="line">[root@c2887d35c71d /]# exit</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方式二</span></span><br><span class="line">[root@192 ~]# docker attach c2887d35c71d</span><br><span class="line">[root@c2887d35c71d /]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 区别</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker <span class="built_in">exec</span> <span class="comment"># 进入容器后开启一个新的终端，可以在里面操作(常用)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker attach 进入容器正在执行的终端，不会启动新的进程</span></span><br></pre></td></tr></table></figure><h4 id="从容器内拷贝文件到主机上"><a href="#从容器内拷贝文件到主机上" class="headerlink" title="从容器内拷贝文件到主机上"></a>从容器内拷贝文件到主机上</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 运行</span></span><br><span class="line">[root@192 ~]# docker run -it centos</span><br><span class="line"><span class="meta">#</span><span class="bash"> ctrl P Q 不关闭退出，查看</span></span><br><span class="line">[root@0569081aa89c /]# [root@192 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">0569081aa89c        centos              "/bin/bash"         19 seconds ago      Up 19 seconds    </span><br><span class="line">hopeful_chebyshev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看主机home下无文件</span></span><br><span class="line">[root@192 ~]# cd /home</span><br><span class="line">[root@192 home]# ls</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入正在运行的容器</span></span><br><span class="line">[root@192 home]# docker attach 0569081aa89c</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入容器home目录</span></span><br><span class="line">[root@0569081aa89c /]# cd /home</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在目录中创建java文件</span></span><br><span class="line">[root@0569081aa89c home]# touch test.java</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 退出并停止容器</span></span><br><span class="line">[root@0569081aa89c home]# exit</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看现在运行的容器</span></span><br><span class="line">[root@192 home]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器虽然被停止，但是数据都会保留</span></span><br><span class="line">[root@192 home]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">0569081aa89c        centos              "/bin/bash"              3 minutes ago       Exited (0) 8 seconds ago                           hopeful_chebyshev</span><br><span class="line">f589e5684a01        centos              "/bin/bash"              44 minutes ago      Exited (0) 44 minutes ago                          cranky_easley</span><br><span class="line">cb6d7fbc3f27        centos              "/bin/sh -c 'while t…"   54 minutes ago      Exited (137) 42 minutes ago                        dreamy_almeida</span><br><span class="line">c2887d35c71d        centos              "/bin/bash"              58 minutes ago      Exited (127) 16 minutes ago                        vigorous_kare</span><br><span class="line">8ce188e5fee3        centos              "/bin/bash"              About an hour ago   Exited (0) About an hour ago                       tender_dirac</span><br><span class="line">7b1a7dd10ea4        centos              "/bin/bash"              9 hours ago         Exited (0) 9 hours ago                             fervent_mirzakhani</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器数据拷贝到主机</span></span><br><span class="line">[root@192 home]# docker cp 0569081aa89c:/home/test.java /home</span><br><span class="line">[root@192 home]# ls</span><br><span class="line">test.java</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现自动同步 /home /home</span></span><br></pre></td></tr></table></figure><h4 id="查看内容占用"><a href="#查看内容占用" class="headerlink" title="查看内容占用"></a>查看内容占用</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats</span><br></pre></td></tr></table></figure><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhkwpalbrj30t50ki7ct.jpg" alt="image-20200617210554147" referrerpolicy="no-referrer"><br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">[root@192 home]# docker --help</span><br><span class="line"></span><br><span class="line">Usage:	docker [OPTIONS] COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime for containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --config string      Location of client config</span><br><span class="line">                           files (default "/root/.docker")</span><br><span class="line">  -c, --context string     Name of the context to use to</span><br><span class="line">                           connect to the daemon</span><br><span class="line">                           (overrides DOCKER_HOST env var</span><br><span class="line">                           and default context set with</span><br><span class="line">                           "docker context use")</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  -l, --log-level string   Set the logging level</span><br><span class="line">                           ("debug"|"info"|"warn"|"error"|"fatal") (default "info")</span><br><span class="line">      --tls                Use TLS; implied by --tlsverify</span><br><span class="line">      --tlscacert string   Trust certs signed only by</span><br><span class="line">                           this CA (default</span><br><span class="line">                           "/root/.docker/ca.pem")</span><br><span class="line">      --tlscert string     Path to TLS certificate file</span><br><span class="line">                           (default "/root/.docker/cert.pem")</span><br><span class="line">      --tlskey string      Path to TLS key file (default</span><br><span class="line">                           "/root/.docker/key.pem")</span><br><span class="line">      --tlsverify          Use TLS and verify the remote</span><br><span class="line">  -v, --version            Print version information and quit</span><br><span class="line"></span><br><span class="line">Management Commands:</span><br><span class="line">  builder     Manage builds</span><br><span class="line">  config      Manage Docker configs</span><br><span class="line">  container   Manage containers</span><br><span class="line">  context     Manage contexts</span><br><span class="line">  engine      Manage the docker engine</span><br><span class="line">  image       Manage images</span><br><span class="line">  network     Manage networks</span><br><span class="line">  node        Manage Swarm nodes</span><br><span class="line">  plugin      Manage plugins</span><br><span class="line">  secret      Manage Docker secrets</span><br><span class="line">  service     Manage services</span><br><span class="line">  stack       Manage Docker stacks</span><br><span class="line">  swarm       Manage Swarm</span><br><span class="line">  system      Manage Docker</span><br><span class="line">  trust       Manage trust on Docker images</span><br><span class="line">  volume      Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  attach      Attach local standard input, output, and error streams to a running container</span><br><span class="line">  build       Build an image from a Dockerfile</span><br><span class="line">  commit      Create a new image from a container's changes</span><br><span class="line">  cp          Copy files/folders between a container and the local filesystem</span><br><span class="line">  create      Create a new container</span><br><span class="line">  diff        Inspect changes to files or directories on a container's filesystem</span><br><span class="line">  events      Get real time events from the server</span><br><span class="line">  exec        Run a command in a running container</span><br><span class="line">  export      Export a container's filesystem as a tar archive</span><br><span class="line">  history     Show the history of an image</span><br><span class="line">  images      List images</span><br><span class="line">  import      Import the contents from a tarball to create a filesystem image</span><br><span class="line">  info        Display system-wide information</span><br><span class="line">  inspect     Return low-level information on Docker objects</span><br><span class="line">  kill        Kill one or more running containers</span><br><span class="line">  load        Load an image from a tar archive or STDIN</span><br><span class="line">  login       Log in to a Docker registry</span><br><span class="line">  logout      Log out from a Docker registry</span><br><span class="line">  logs        Fetch the logs of a container</span><br><span class="line">  pause       Pause all processes within one or more containers</span><br><span class="line">  port        List port mappings or a specific mapping for the container</span><br><span class="line">  ps          List containers</span><br><span class="line">  pull        Pull an image or a repository from a registry</span><br><span class="line">  push        Push an image or a repository to a registry</span><br><span class="line">  rename      Rename a container</span><br><span class="line">  restart     Restart one or more containers</span><br><span class="line">  rm          Remove one or more containers</span><br><span class="line">  rmi         Remove one or more images</span><br><span class="line">  run         Run a command in a new container</span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">  search      Search the Docker Hub for images</span><br><span class="line">  start       Start one or more stopped containers</span><br><span class="line">  stats       Display a live stream of container(s) resource usage statistics</span><br><span class="line">  stop        Stop one or more running containers</span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">  top         Display the running processes of a container</span><br><span class="line">  unpause     Unpause all processes within one or more containers</span><br><span class="line">  update      Update configuration of one or more containers</span><br><span class="line">  version     Show the Docker version information</span><br><span class="line">  wait        Block until one or more containers stop, then print their exit codes</span><br></pre></td></tr></table></figure><p></p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhkx97yk0j30xf0jeqme.jpg" alt="image-20200617210932306" referrerpolicy="no-referrer"></p><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhkxpdvgbj30vq0byaky.jpg" alt="image-20200617211021003" referrerpolicy="no-referrer"></p><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhky619t8j30ux01mtaf.jpg" alt="image-20200617211039508" referrerpolicy="no-referrer"></p><h4 id="部署实践"><a href="#部署实践" class="headerlink" title="部署实践"></a>部署实践</h4><h5 id="部署Nginx"><a href="#部署Nginx" class="headerlink" title="部署Nginx"></a>部署Nginx</h5><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhl7voxaoj311i0e4wfy.jpg" alt="image-20200618100621199" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 官网搜索nginx，可以看到帮助文档</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载镜像</span></span><br><span class="line">[root@192 home]# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">8559a31e96f4: Pull complete </span><br><span class="line">8d69e59170f7: Pull complete </span><br><span class="line">3f9f1ec1d262: Pull complete </span><br><span class="line">d1f5ff4f210d: Pull complete </span><br><span class="line">1e22bfa8652e: Pull complete </span><br><span class="line">Digest: sha256:21f32f6c08406306d822a0e6e8b7dc81f53f336570e852e25fbe1e3e3d0d0133</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看镜像</span></span><br><span class="line">[root@192 home]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos              latest              831691599b88        13 hours ago        215MB</span><br><span class="line">nginx               latest              2622e6cca7eb        7 days ago          132MB</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行测试</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 后台运行，--name 命名，-p 暴露端口，3344服务器、宿主机的端口，容器内部端口</span></span><br><span class="line">[root@192 home]# docker run -d --name nginx01 -p:3344:80 nginx</span><br><span class="line">38dbf7bdcaef232d269b7184d91e44e06087181b5ee929494e177ad526810fa8</span><br><span class="line">[root@192 home]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">38dbf7bdcaef        nginx               "/docker-entrypoint.…"   7 seconds ago       Up 6 seconds        0.0.0.0:3344-&gt;80/tcp   nginx01</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用3344可以访问成功</span></span><br><span class="line">[root@192 home]# curl localhost:3344</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>端口暴露</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlbnt4inj30rf0kumz1.jpg" alt="image-20200617212310709" referrerpolicy="no-referrer"></p><p>可以公网访问</p><p>找到服务器地址</p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlcr2uwoj30h707iaa2.jpg" alt="image-20200617213213721" referrerpolicy="no-referrer"></p><p>浏览器输入 192.168.147.132:3344/</p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhld75t7sj316d0ivab9.jpg" alt="image-20200617213142079" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@192 home]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">38dbf7bdcaef        nginx               "/docker-entrypoint.…"   21 minutes ago      Up 21 minutes       0.0.0.0:3344-&gt;80/tcp   nginx01</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入容器</span></span><br><span class="line">[root@192 home]# docker exec -it nginx01 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查一下nginx在哪</span></span><br><span class="line">root@38dbf7bdcaef:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 到这个目录</span></span><br><span class="line">root@38dbf7bdcaef:/# cd /etc/nginx</span><br><span class="line">root@38dbf7bdcaef:/etc/nginx# ls</span><br><span class="line">conf.d		koi-utf  mime.types  nginx.conf   uwsgi_params</span><br><span class="line">fastcgi_params	koi-win  modules     scgi_params  win-utf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 退出</span></span><br><span class="line">root@38dbf7bdcaef:/etc/nginx# exit</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止</span></span><br><span class="line">[root@192 home]# docker stop 38dbf7bdcaef</span><br><span class="line">38dbf7bdcaef</span><br></pre></td></tr></table></figure><p>再次刷新网页，服务关闭</p><p>思考问题：每次改动nginx配置文件，都需要进入容器内部，十分麻烦，要是可以在容器外部提供一个映射路径，达到在容器修改文件名，容器内部就可以自动修改？-v 数据卷技术！</p><h5 id="部署tomcat"><a href="#部署tomcat" class="headerlink" title="部署tomcat"></a>部署tomcat</h5><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhldq4jgtj31610f5dia.jpg" alt="image-20200618100551587" referrerpolicy="no-referrer"></p><p>在docker hub上查看版本号和使用方法</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gkhlmxmye5j30ym0jawgy.jpg" alt="image-20200618100319796" referrerpolicy="no-referrer"></p><p>官方文档一定要翻烂，超多版本，我的天呐~</p><h6 id="官方方法"><a href="#官方方法" class="headerlink" title="官方方法"></a>官方方法</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm tomcat:9.0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker run 可以不用pull，能自动下载</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -it 直接进去运行</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --rm 是什么意思？入门的意思？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 我们之前的启动都是后台，停止了容器之后，容器还是可以查到</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 写了--rm，类似阅后即焚模式，用完即删除，这种通常用来测试</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 最后冒号查好的版本号</span></span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn//006MOU0zgy1gkhlnldbxyj30u90lvth1.jpg" alt="image-20200618101811914" referrerpolicy="no-referrer"></p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhloc2536j30v70p5qdz.jpg" alt="image-20200618101849917" referrerpolicy="no-referrer"></p><p>ctrl+c退出</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gkhlpbwz9aj31aj0fk401.jpg" alt="image-20200618102022167" referrerpolicy="no-referrer"></p><p>可以看到并没有tomcat，印证阅后即焚模式，容器会删除，镜像不会删除</p><p>平时不建议这样搞</p><h6 id="正常方法"><a href="#正常方法" class="headerlink" title="正常方法"></a>正常方法</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tomcat:9.0 # 之前下过了，应该不用下了，这里老师讲错了</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlpsck0hj30rh0avwf5.jpg" alt="image-20200618102544564" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动运行，应该加上版本号</span></span><br><span class="line">docker run -d -p 3355:8080 --name tomcat01 tomcat</span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlqbmpdcj31ar0hotau.jpg" alt="image-20200618102837397" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进入容器</span></span><br><span class="line">docker exec -it tomcat01 /bin/bash</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlqs9wpej317v0i20ui.jpg" alt="image-20200618103109004" referrerpolicy="no-referrer"></p><p>发现问题</p><ol><li>linux命令少了</li><li>没有webapps</li></ol><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlr8409sj313s043glx.jpg" alt="image-20200618103407205" referrerpolicy="no-referrer"></p><p>这是阿里云镜像的原因：默认使用最小镜像，所有不必要的都剔除了，保证最小可运行环境</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhlrmc6vqj31810lgjun.jpg" alt="image-20200618103848104" referrerpolicy="no-referrer"></p><p>再次找到结构</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gkhls2tegmj30ot0hltag.jpg" alt="image-20200618104052242" referrerpolicy="no-referrer"></p><p>在浏览器中输入：<a href="http://192.168.147.132:3355/" target="_blank" rel="noopener">http://192.168.147.132:3355/</a></p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlsijpzjj31fz0sywlo.jpg" alt="image-20200618103958168" referrerpolicy="no-referrer"></p><p>思考问题：我们以后部署项目，如果每次都要进入容器是不是身份麻烦？我要是可以在容器外部提供一个映射路径，webapps，我们在外部放置项目，就自动同步到内部就好了！</p><p>docker容器 tomcat+网站</p><p>docker mysql</p><h5 id="部署es-kibana"><a href="#部署es-kibana" class="headerlink" title="部署es+kibana"></a>部署es+kibana</h5><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhlsy1uhcj31370aemyb.jpg" alt="image-20200618104950722" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> es 暴露的端口很多</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> es 十分耗内存</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> es 的数据一般需要放置到安全目录！挂载</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动 elasticsearch</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d --name elasticsearch01 -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> elasticsearch:7.6.2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看内存占用情况</span></span><br><span class="line">docker stats</span><br></pre></td></tr></table></figure><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhltrzp8oj318703jaa3.jpg" alt="image-20200618111713885" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 先感觉stop一下</span></span><br><span class="line">docker stop ba18713ca536</span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlu5mccvj319608tgn1.jpg" alt="image-20200618105057785" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通过 -e 限制内存</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> -e ES_JAVA_OPTS=“-Xms64m -Xmx512m” elasticsearch:7.6.2</span></span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhluu7amjj31a7034wen.jpg" alt="image-20200618113018622" referrerpolicy="no-referrer"></p><p>没成功啊，SEI能告诉我为啥！！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms64m -Xmx512m" elasticsearch:7.6.2</span><br></pre></td></tr></table></figure><p>百度答案:</p><ol><li>设置启动内存更小:<code>ES_JAVA_OPTS=-Xms64m -Xmx512m</code></li><li>引号提前试试</li></ol><p>原因是引号！！你没觉得怪怪的嘛</p><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhlwt9hfgj319y03bt8w.jpg" alt="image-20200618115302656" referrerpolicy="no-referrer"></p><p>此时查看stats，发现内存占用在控制范围内</p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhlx9b1wjj319t059t8x.jpg" alt="image-20200618115149971" referrerpolicy="no-referrer"></p><p>ctrl + C退出，记得stop</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gkhlxpn9orj31ac06qmxn.jpg" alt="image-20200618115921069" referrerpolicy="no-referrer"></p><h5 id="思考：用kibana链接elasticsearch"><a href="#思考：用kibana链接elasticsearch" class="headerlink" title="思考：用kibana链接elasticsearch"></a>思考：用kibana链接elasticsearch</h5><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhly4h0llj30mr09yglz.jpg" alt="image-20200618113556445" referrerpolicy="no-referrer"></p><h3 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h3><ul><li>portainer(先用这个)</li><li>Rancher(CI/CD时用)</li></ul><h4 id="portainer"><a href="#portainer" class="headerlink" title="portainer"></a>portainer</h4><p>Docker图像化界面管理工具，提供一个后台面板供我们操作！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gkhlzav3s1j31a007z0tc.jpg" alt="image-20200618114542622" referrerpolicy="no-referrer"></p><p>访问外网8088</p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gkhlzrfr46j31d10o8wg1.jpg" alt="image-20200618114902169" referrerpolicy="no-referrer"></p><p>用户名</p><p>密码</p><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhm0vl3t0j31ea0sbdis.jpg" alt="image-20200618134706491" referrerpolicy="no-referrer"></p><p>【中午吃饭重连了一下，失败，不知道发生了啥】</p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gkhm1e4l3cj31ag08gdgl.jpg" alt="image-20200618135424706" referrerpolicy="no-referrer"></p><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gkhm21sawoj31dk0p80vy.jpg" alt="image-20200618135450037" referrerpolicy="no-referrer"></p><p>【平时不会用这个，好吧，先往下】</p><h2 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>UnionFS 联合文件系统</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki1rhskmbj30nv080tdt.jpg" alt="image-20200618140242423" referrerpolicy="no-referrer"></p><p>bootfs：boot file system</p><p>rootfs：root file system</p><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki1t5voazj30h20anq4u.jpg" alt="image-20200618140907894" referrerpolicy="no-referrer"><br><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki1tlz287j30h108qabj.jpg" alt="image-20200618140932621" referrerpolicy="no-referrer"></p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki1vg0tmij30vv0gbgpu.jpg" alt="image-20200618141014511" referrerpolicy="no-referrer"></p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki1vy1c2vj30vx0ga796.jpg" alt="image-20200618153329894" referrerpolicy="no-referrer"></p><p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加到镜像的顶部，这一层就是我们通常说的容器层，容器层之下的都叫镜像层</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki1wybfcbj30th04wmyz.jpg" alt="image-20200618153855605" referrerpolicy="no-referrer"></p><h3 id="commit提交镜像"><a href="#commit提交镜像" class="headerlink" title="commit提交镜像"></a>commit提交镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker commit # 提交容器成为一个新的副本</span><br><span class="line">docker commit -m="提交的描述信息" -a="作者" 容器id 目标镜像名：[TAG]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker run -it -p 8080:8080 tomcat</span><br></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki1xngk7nj31a30mztby.jpg" alt="image-20200618154457286" referrerpolicy="no-referrer"></p><p>这是一个前台程序</p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki1y6prbjj31gn0o341d.jpg" alt="image-20200618154736475" referrerpolicy="no-referrer"></p><p>将webapps.dist里面所有的文件拷贝到webapps里面，其中-r必须有，表示目录递归拷贝</p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gki1z1sc3rj30q809bmy0.jpg" alt="image-20200618154943194" referrerpolicy="no-referrer"></p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki1zh3vfvj31ek0matdt.jpg" alt="image-20200618155750591" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -a="paidaxing" -m="add webapps app" 当前容器的id tomcat02:1.0</span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gki1zy1k0ej31ag0hnmzn.jpg" alt="image-20200618160425265" referrerpolicy="no-referrer"></p><p>发现新的版本，比之前的大了一些，因为里面记录了我们的改动</p><blockquote><p>如果想保存当前容器的状态，可以通过commit提交，获得一个镜像</p><p>好比我们以前学习VM的时候的快照</p><p>到这里算是入门了</p><p>接下来三个部分是docker的精髓</p></blockquote><h2 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h2><h3 id="什么是容器卷"><a href="#什么是容器卷" class="headerlink" title="什么是容器卷"></a>什么是容器卷</h3><p>docker是要将应用和环境打包成一个镜像</p><p>这样，数据就不应该在容器中，否则容器删除，数据就会丢失，这就是删库跑路</p><p>故容器之间要有一个数据共享技术</p><p>在Docker容器中产生的数据，同步到本地，这就是卷技术</p><p>本质上是一个目录挂载，将容器内的目录挂载到虚拟机上</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki25i511fj30ha0bfabm.jpg" alt="image-20200618162917672" referrerpolicy="no-referrer"></p><p>目的：容器的持久化和同步操作</p><p>容器间可以数据共享</p><h3 id="使用数据卷"><a href="#使用数据卷" class="headerlink" title="使用数据卷"></a>使用数据卷</h3><p>方式一：直接使用命令来挂载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> -it 交互式进入</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v volume卷技术</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p 主机端口</span></span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2jreecrj31a505x3zb.jpg" alt="image-20200618163659503" referrerpolicy="no-referrer"></p><p>新开一个窗口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器id</span><br></pre></td></tr></table></figure><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2kf42wkj31ef0msq55.jpg" alt="image-20200618163938466" referrerpolicy="no-referrer"></p><p>找到挂载信息Mounts</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2kt4983j30o708htbg.jpg" alt="image-20200618164148642" referrerpolicy="no-referrer"></p><p>测试</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2l7pl99j31ae0s2ads.jpg" alt="image-20200618164818624" referrerpolicy="no-referrer"></p><p>容器停止后，修改主机文件，再启动容器的时候，数据同样改变</p><p>双向同步</p><h3 id="实战安装mysql"><a href="#实战安装mysql" class="headerlink" title="实战安装mysql"></a>实战安装mysql</h3><p>MySQL的数据持久化命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拉取</span></span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载</span></span><br><span class="line">docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql5.7</span><br><span class="line"></span><br><span class="line">-d 后台运行</span><br><span class="line">-p 端口映射</span><br><span class="line">-v 卷挂载</span><br><span class="line">-e 环境配置 安装启动mysql需要配置密码</span><br><span class="line">--name 容器名字</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2lm22ozj30q40kraby.jpg" alt="image-20200618171353336" referrerpolicy="no-referrer"></p><p>链接测试：打开SQLyog</p><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2m1idxwj31bk0psdma.jpg" alt="image-20200618173234347" referrerpolicy="no-referrer"></p><p>点 测试链接</p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2meiof4j30mk0igwha.jpg" alt="image-20200618173300551" referrerpolicy="no-referrer"></p><p>点 链接</p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2mu4uxrj30mt0csq3t.jpg" alt="image-20200618173729692" referrerpolicy="no-referrer"></p><h3 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="headerlink" title="具名和匿名挂载"></a>具名和匿名挂载</h3><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gki2ncxp0kj30vw0m27d8.jpg" alt="image-20200618203452205" referrerpolicy="no-referrer"></p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2nqu5nzj30w10aadje.jpg" alt="image-20200618203744983" referrerpolicy="no-referrer"></p><h3 id="DockerFile使用来构建docker镜像的文件"><a href="#DockerFile使用来构建docker镜像的文件" class="headerlink" title="DockerFile使用来构建docker镜像的文件"></a>DockerFile使用来构建docker镜像的文件</h3><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2od603cj31gj0sdtbg.jpg" alt="image-20200618211547398" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vim # 编辑文件的，没有装一下</span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gki2p2q42kj313z09sdgj.jpg" alt="image-20200618211516566" referrerpolicy="no-referrer"></p><p>安装完之后就可以运行这个命令了</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2pj2vhwj311t0hh0ug.jpg" alt="image-20200618211803012" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 镜像是一层一层的，脚本是一行一行的</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指令都是大写的</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这里的每个命令可以理解为镜像的一层</span></span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line"></span><br><span class="line">VOLUME ["volume01","volume02"] # 再创建镜像的时候就挂载出来</span><br><span class="line"></span><br><span class="line">CMD echo "---end---"</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki2pyphk1j30gt0bsdfv.jpg" alt="image-20200618211023834" referrerpolicy="no-referrer"></p><p>想保存并退出</p><blockquote><p>Wesley.:<br>shift 加 冒号</p></blockquote><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gki2qcpvitj30l40bjdft.jpg" alt="image-20200618211318410" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat dockerfile1</span><br><span class="line"></span><br><span class="line">docker build -f dockerfile1 -t padaxing/centos:1.0 .  # 最后的点很重要 镜像名不能有/</span><br></pre></td></tr></table></figure><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki2qs4hi3j31490gjdhd.jpg" alt="image-20200618212936481" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2r5q0q9j310z08kgmg.jpg" alt="image-20200618213310752" referrerpolicy="no-referrer"></p><p>启动生成的镜像</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2rlndwwj31300jntau.jpg" alt="image-20200618220658979" referrerpolicy="no-referrer"></p><p>在容器内部创建一个文件</p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2t7fm6vj314f0ogdhm.jpg" alt="image-20200618221801103" referrerpolicy="no-referrer"></p><p>查看Mounts，Source对应容器外目录，匿名挂载卷</p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2tjcy1pj314q0hljse.jpg" alt="image-20200618221837895" referrerpolicy="no-referrer"></p><p>测试一下，在container volume01下生成文件</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki2tv7r1tj314s076gmf.jpg" alt="image-20200618222224352" referrerpolicy="no-referrer"></p><p>在主机挂载路径下，也同样生成</p><h3 id="多个容器数据共享"><a href="#多个容器数据共享" class="headerlink" title="多个容器数据共享"></a>多个容器数据共享</h3><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2uae9zwj30sf08hjt7.jpg" alt="image-20200621165403842" referrerpolicy="no-referrer"></p><p>看一下有啥images</p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki2untmw4j30ub0hddgx.jpg" alt="image-20200621165733780" referrerpolicy="no-referrer"></p><p>启动docker01，用之前建的padaxing/centos 1.0 镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name docker01 padaxing/centos:1.0 # 1.0必须写</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2x2t5ulj310g0lfwgo.jpg" alt="image-20200621170429658" referrerpolicy="no-referrer"></p><p>当前这个<strong>ctrl+p+q</strong>不停止退出</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2xv26z7j30m401z0sm.jpg" alt="image-20200621170540593" referrerpolicy="no-referrer"></p><p>依次启动docker02、docker03</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name docker02 --volumes-from docker01 padaxing/centos:1.0</span><br></pre></td></tr></table></figure><p>docker02继承docker01的volumes</p><p>可以验证，在docker01下加一个数据，在docker02下也会出现</p><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki2zs8rmjj31120g0777.jpg" alt="image-20200621171513650" referrerpolicy="no-referrer"></p><p>创建docker03，同样继承docker01</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name docker03 --volumes-from docker01 padaxing/centos:1.0</span><br></pre></td></tr></table></figure><p><img src="https://tvax1.sinaimg.cn/large/006MOU0zgy1gki307lyexj310h072dgh.jpg" alt="image-20200621172333639" referrerpolicy="no-referrer"></p><p>在docker03的volume01下建立文件，在docker01的volume01下同样也有</p><p>即通过–volumes-from 可以实现不同容器间的数据共享</p><p>删除docker01，数据还在</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f</span><br></pre></td></tr></table></figure><p><img src="https://tva2.sinaimg.cn/large/006MOU0zgy1gki30l4f5ej30mi04p74h.jpg" alt="image-20200621172830779" referrerpolicy="no-referrer"></p><p>可以看到，删除docker01，进入docker02，数据依然在</p><p>结论：</p><p>容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用位置</p><p>但是如果持久化到了本地，即使所有容器删除了，本地数据是不会删除的</p><h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><p>是用来构建docker镜像的文件，可以理解为命令参数脚本</p><p>构建步骤：</p><ol><li>编写一个dockerfile文件</li><li>docker build 构建成为一个镜像</li><li>docker run运行镜像</li><li>docker push 发布镜像（DockerHub、阿里云镜像仓库 私有/共有）</li></ol><p>这个写一个项目时一样的</p><h3 id="官方DockerFile示例"><a href="#官方DockerFile示例" class="headerlink" title="官方DockerFile示例"></a>官方DockerFile示例</h3><p>看一下官方的DockerFile</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3ojc6ilj31bq0tqq6i.jpg" alt="image-20200621174204807" referrerpolicy="no-referrer"></p><p>可以看到官方镜像都是基础包，很多功能没有，我们通常会自己搭建自己的镜像</p><p>官方既然可以制作镜像，我们亦可以</p><hr><h3 id="DockerFile基础知识"><a href="#DockerFile基础知识" class="headerlink" title="DockerFile基础知识"></a>DockerFile基础知识</h3><ol><li>每个指令都必须是大写字母</li><li>按照从上到下顺序执行</li><li><em>#</em>表示注释</li><li>每一个指令都会创建体检一个新的镜像层，并提交</li></ol><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki3oyut7uj30nu0c2ae8.jpg" alt="image-20200621174948310" referrerpolicy="no-referrer"></p><p>docker是面向开发的，我们以后要发布项目，做镜像，就要编写dockerfile文件，这个文件十分简单！</p><p>Docker镜像逐渐成为企业的交付标准，必须掌握！</p><hr><h3 id="DockerFile命令"><a href="#DockerFile命令" class="headerlink" title="DockerFile命令"></a>DockerFile命令</h3><p><img src="http://www.yunweipai.com/wp-content/uploads/2016/09/171.jpg" alt="æ¥çæºå¾å"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FROM # 基础镜像 比如centos</span><br><span class="line">MAINTAINER # 镜像是谁写的 姓名+邮箱</span><br><span class="line">RUN # 镜像构建时需要运行的命令</span><br><span class="line">ADD # 添加，比如添加一个tomcat压缩包</span><br><span class="line">WORKDIR # 镜像的工作目录</span><br><span class="line">VOLUME # 挂载的目录</span><br><span class="line">EXPOSE # 指定暴露端口，跟-p一个道理</span><br><span class="line">RUN # 最终要运行的</span><br><span class="line">CMD # 指定这个容器启动的时候要运行的命令，只有最后一个会生效，而且可被替代</span><br><span class="line">ENTRYPOINT # 指定这个容器启动的时候要运行的命令，可以追加命令</span><br><span class="line">ONBUILD # 当构建一个被继承Dockerfile 这个时候运行ONBUILD指定，触发指令</span><br><span class="line">COPY # 将文件拷贝到镜像中</span><br><span class="line">ENV # 构建的时候设置环境变量</span><br></pre></td></tr></table></figure><h3 id="实战构建自己的centos"><a href="#实战构建自己的centos" class="headerlink" title="实战构建自己的centos"></a>实战构建自己的centos</h3><p>Docker Hub中99%的镜像都是从FROM scratch开始的</p><p>添加centos7的压缩包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建一个自己的centos</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入home目录</span></span><br><span class="line">cd /home</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建一个目录，之后的东西都保存到这里</span></span><br><span class="line">mkdir dockerfile</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入这个目录</span></span><br><span class="line">cd dockerfile/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建一个dockerfile，名字叫mydockerfile</span></span><br><span class="line">vim mydockerfile-centos</span><br></pre></td></tr></table></figure><p>xshell新开一个界面</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 官方默认centos</span></span><br><span class="line">docker run -it centos</span><br><span class="line">pwd # 官方默认有pwd命令</span><br><span class="line">vim # 官方默认没有vim命令</span><br><span class="line">ifconfig # 官方默认没有ifconfig命令</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3sq4dqcj30gw078t8x.jpg" alt="image-20200621184333206" referrerpolicy="no-referrer"></p><p>回到mydockerfile</p><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gki3t16owkj30u00abjs1.jpg" alt="image-20200621184847524" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下面给官方centos加上自定义的内容</span></span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER padaxing&lt;010301200@hai.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo "---end---"</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3twnv2rj30ml0f874l.jpg" alt="image-20200621185539523" referrerpolicy="no-referrer"></p><p>ESC, shif + : 输入wq保存并退出</p><p>如果写错了需要修改、</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim mydockerfile-centos</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入之后按i或者INSERT键即可修改</span></span><br></pre></td></tr></table></figure><p>下面通过这个这个文件创建镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f dockerfile-centos -t mycentos:0.1 .</span><br></pre></td></tr></table></figure><p><img src="https://tva3.sinaimg.cn/large/006MOU0zgy1gki3ugk96rj30wr0ieta9.jpg" alt="image-20200621190219978" referrerpolicy="no-referrer"></p><p>依次执行命令</p><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki3ut2qj3j30ml0hjgmr.jpg" alt="image-20200621190439448" referrerpolicy="no-referrer"></p><p>最终返回Successfully表示成功</p><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3v7cag2j30zl08p754.jpg" alt="image-20200621190524848" referrerpolicy="no-referrer"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it mycentos:0.1 # 版本号必须写，不然他会去找最新的</span><br><span class="line">pwd</span><br><span class="line">vim</span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p><img src="https://tva4.sinaimg.cn/large/006MOU0zgy1gki3vkpu34j30p20e73zh.jpg" alt="image-20200621190812481" referrerpolicy="no-referrer"></p><p>这时可以看到这些功能都有了</p><p>可以通过查看docker构建历史</p><p><img src="https://tvax2.sinaimg.cn/large/006MOU0zgy1gki3vyj8u7j318t0jt76v.jpg" alt="image-20200621192103460" referrerpolicy="no-referrer"></p><p>可以看到当前这个镜像是怎么一步一步构建起来的</p><p>我们平时拿到一个镜像也可以通过这个方法研究一下他是怎么做的</p><h3 id="CMD与ENTRYPOINT"><a href="#CMD与ENTRYPOINT" class="headerlink" title="CMD与ENTRYPOINT"></a>CMD与ENTRYPOINT</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM centos</span><br><span class="line">CMD ["ls","-a"] # 启动centos展示目录</span><br></pre></td></tr></table></figure><p><img src="https://tvax3.sinaimg.cn/large/006MOU0zgy1gki3wgsh4cj30va0lc45g.jpg" alt="image-20200622075427103" referrerpolicy="no-referrer"></p><p>测试ENTRYPOINT</p><p><img src="https://tvax4.sinaimg.cn/large/006MOU0zgy1gki3wtes2bj30vc0bzdkk.jpg" alt="image-20200622075653789" referrerpolicy="no-referrer"></p><p>run的时候可以直接加命令</p><p><img src="https://tva1.sinaimg.cn/large/006MOU0zgy1gki3x78l4zj30vb0fq10z.jpg" alt="image-20200622075802180" referrerpolicy="no-referrer"></p><p>Docker中许多命令都十分相似，我们需要了解他们的区别，最好的方式就是这样对比测试</p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> 在线分享网</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://me.obey.fun/Docker入门与实践.html" title="Docker入门与实践">https://me.obey.fun/Docker入门与实践.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均为原创。转载请注明出处！</li></ul></div><div><div><blockquote class="blockquote-center" style="color:#ccc">-------------本文结束 <i class="fa fa-apple"></i> 感谢您的阅读-------------</blockquote></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div>文章对我有益，我要小额赞赏...</div><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.jpg" alt="HuiProgramer 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/alipay.jpg" alt="HuiProgramer 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div id="tags" class="post-tags"><a href="/tags/集装箱/" rel="tag">集装箱</a> <a href="/tags/容器化部署/" rel="tag">容器化部署</a></div><script type="text/javascript">for(var alltags=document.getElementById("tags"),tags=alltags.getElementsByTagName("a"),i=tags.length-1;i>=0;i--){var r=Math.floor(75*Math.random()+130),g=Math.floor(75*Math.random()+100),b=Math.floor(75*Math.random()+80);tags[i].style.background="rgb("+r+","+g+","+b+")"}var text="Docker入门与实践";document.onreadystatechange=function(){"complete"==document.readyState&&wenkmTips.show("正在阅读 -> "+text)}</script><style type="text/css">.post-tags a{color:#fff;background-color:#f5f7f1;border-radius:6px;padding-right:10px;padding-left:10px;margin-right:5px;margin-left:0;margin-top:18px;margin-bottom:0}.post-tags a:before{content:"📜"}</style><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/RocketMQ高级特性.html" rel="next" title="RocketMQ高级特性"><i class="fa fa-chevron-left"></i> RocketMQ高级特性</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/POI和EasyExcel的简单使用.html" rel="prev" title="POI和EasyExcel的简单使用">POI和EasyExcel的简单使用 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><div title="返回顶部(或下方百分比按钮)" class="backtop" style="background-position:0 -1000px"></div><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="https://huiprogramer.gitee.io/medias/avatar.jpg" alt="HuiProgramer" referrerpolicy="no-referrer"><p class="site-author-name" itemprop="name">HuiProgramer</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">52</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">39</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">41</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a rel="external nofollow" href="https://github.com/HuiProgramer" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="mailto:huiprogramer@outlook.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://www.jianshu.com/u/1606b64f25b5" target="_blank" title="简书"><i class="fa fa-fw fa-heartbeat"></i>简书</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://cnblogs.com/HuiProgramer" target="_blank" title="博客园"><i class="fa fa-fw fa-book"></i>博客园</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 推荐阅读</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Git教程.html" title="Git教程" target="_blank">Git教程</a></li><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Markdown基本语法.html" title="Markdown基本语法" target="_blank">Markdown基本语法</a></li><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Java学习路线图.html" title="Java学习路线图" target="_blank">Java学习路线图</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker"><span class="nav-number">1.</span> <span class="nav-text">Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">1.1.</span> <span class="nav-text">参考资料</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前期基础"><span class="nav-number">1.2.</span> <span class="nav-text">前期基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker概述"><span class="nav-number">1.3.</span> <span class="nav-text">Docker概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker为什么会出现"><span class="nav-number">1.3.1.</span> <span class="nav-text">Docker为什么会出现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker的历史"><span class="nav-number">1.3.2.</span> <span class="nav-text">Docker的历史</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#容器vs虚拟机"><span class="nav-number">1.3.3.</span> <span class="nav-text">容器vs虚拟机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#虚拟机原理示意图"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">虚拟机原理示意图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二者对比"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">二者对比</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker安装"><span class="nav-number">1.4.</span> <span class="nav-text">Docker安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker的基本组成"><span class="nav-number">1.4.1.</span> <span class="nav-text">Docker的基本组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#环境准备"><span class="nav-number">1.4.2.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装xshell"><span class="nav-number">1.4.3.</span> <span class="nav-text">安装xshell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Centos安装"><span class="nav-number">1.4.4.</span> <span class="nav-text">Centos安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#卸载旧的版本"><span class="nav-number">1.4.5.</span> <span class="nav-text">卸载旧的版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装基本环境"><span class="nav-number">1.4.6.</span> <span class="nav-text">安装基本环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置镜像的仓库"><span class="nav-number">1.4.7.</span> <span class="nav-text">设置镜像的仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装docker引擎"><span class="nav-number">1.4.8.</span> <span class="nav-text">安装docker引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动Docker"><span class="nav-number">1.4.9.</span> <span class="nav-text">启动Docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#卸载Docker"><span class="nav-number">1.4.10.</span> <span class="nav-text">卸载Docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#阿里云镜像加速"><span class="nav-number">1.4.11.</span> <span class="nav-text">阿里云镜像加速</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker命令"><span class="nav-number">1.5.</span> <span class="nav-text">Docker命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#帮助命令"><span class="nav-number">1.5.1.</span> <span class="nav-text">帮助命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像命令"><span class="nav-number">1.5.2.</span> <span class="nav-text">镜像命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-images"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">docker images</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-search"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">docker search</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-pull"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">docker pull</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-rmi"><span class="nav-number">1.5.2.4.</span> <span class="nav-text">docker rmi</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#容器命令"><span class="nav-number">1.5.3.</span> <span class="nav-text">容器命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#新建容器并启动"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">新建容器并启动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进入退出容器"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">进入退出容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看运行的容器"><span class="nav-number">1.5.3.3.</span> <span class="nav-text">查看运行的容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#退出容器"><span class="nav-number">1.5.3.4.</span> <span class="nav-text">退出容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除容器"><span class="nav-number">1.5.3.5.</span> <span class="nav-text">删除容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动和停止容器的操作"><span class="nav-number">1.5.3.6.</span> <span class="nav-text">启动和停止容器的操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用其他命令"><span class="nav-number">1.5.4.</span> <span class="nav-text">常用其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#后台启动docker"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">后台启动docker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看日志"><span class="nav-number">1.5.4.2.</span> <span class="nav-text">查看日志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看正在运行的容器信息"><span class="nav-number">1.5.4.3.</span> <span class="nav-text">查看正在运行的容器信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进入当前正在运行的容器"><span class="nav-number">1.5.4.4.</span> <span class="nav-text">进入当前正在运行的容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#从容器内拷贝文件到主机上"><span class="nav-number">1.5.4.5.</span> <span class="nav-text">从容器内拷贝文件到主机上</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看内容占用"><span class="nav-number">1.5.4.6.</span> <span class="nav-text">查看内容占用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小结"><span class="nav-number">1.5.4.7.</span> <span class="nav-text">小结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#部署实践"><span class="nav-number">1.5.4.8.</span> <span class="nav-text">部署实践</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#部署Nginx"><span class="nav-number">1.5.4.8.1.</span> <span class="nav-text">部署Nginx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#部署tomcat"><span class="nav-number">1.5.4.8.2.</span> <span class="nav-text">部署tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#官方方法"><span class="nav-number">1.5.4.8.2.1.</span> <span class="nav-text">官方方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#正常方法"><span class="nav-number">1.5.4.8.2.2.</span> <span class="nav-text">正常方法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#部署es-kibana"><span class="nav-number">1.5.4.8.3.</span> <span class="nav-text">部署es+kibana</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#思考：用kibana链接elasticsearch"><span class="nav-number">1.5.4.8.4.</span> <span class="nav-text">思考：用kibana链接elasticsearch</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可视化"><span class="nav-number">1.5.5.</span> <span class="nav-text">可视化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#portainer"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">portainer</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker镜像"><span class="nav-number">1.6.</span> <span class="nav-text">Docker镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原理"><span class="nav-number">1.6.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#commit提交镜像"><span class="nav-number">1.6.2.</span> <span class="nav-text">commit提交镜像</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#容器数据卷"><span class="nav-number">1.7.</span> <span class="nav-text">容器数据卷</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是容器卷"><span class="nav-number">1.7.1.</span> <span class="nav-text">什么是容器卷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用数据卷"><span class="nav-number">1.7.2.</span> <span class="nav-text">使用数据卷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实战安装mysql"><span class="nav-number">1.7.3.</span> <span class="nav-text">实战安装mysql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#具名和匿名挂载"><span class="nav-number">1.7.4.</span> <span class="nav-text">具名和匿名挂载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile使用来构建docker镜像的文件"><span class="nav-number">1.7.5.</span> <span class="nav-text">DockerFile使用来构建docker镜像的文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多个容器数据共享"><span class="nav-number">1.7.6.</span> <span class="nav-text">多个容器数据共享</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DockerFile"><span class="nav-number">1.8.</span> <span class="nav-text">DockerFile</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#官方DockerFile示例"><span class="nav-number">1.8.1.</span> <span class="nav-text">官方DockerFile示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile基础知识"><span class="nav-number">1.8.2.</span> <span class="nav-text">DockerFile基础知识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile命令"><span class="nav-number">1.8.3.</span> <span class="nav-text">DockerFile命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实战构建自己的centos"><span class="nav-number">1.8.4.</span> <span class="nav-text">实战构建自己的centos</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CMD与ENTRYPOINT"><span class="nav-number">1.8.5.</span> <span class="nav-text">CMD与ENTRYPOINT</span></a></li></ol></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">Copyright&copy; <span itemprop="copyrightYear">2018-2020</span> <span class="with-love" id="heart"><i class="fa fa-heart" style="color:#ff71a8"></i> </span><span class="author" itemprop="copyrightHolder">HuiProgramer</span></div><div><span id="days"></span> <span class="my-face">ღゝ◡╹)ノ♡</span></div><div><span id="busuanzi_container_site_pv" style="display:inline-block">总访问量： <span id="busuanzi_value_site_pv"></span> 次 <span class="post-meta-divider">|</span> </span><span id="busuanzi_container_site_uv" style="display:inline-block">访问人数：<span id="busuanzi_value_site_uv"></span> 人 <span class="post-meta-divider">|</span></span><div class="theme-info"><span class="post-count">字数统计：211.5k 字</span></div></div><div><span id="cnzz_stat_icon_1277385852"></span><script src="https://s23.cnzz.com/z_stat.php?id=1277385852&amp;online=1&amp;show=line" type="text/javascript"></script><script src="https://c.cnzz.com/core.php?web_id=1277385852&amp;show=line&amp;online=1&amp;t=z" charset="utf-8" type="text/javascript"></script></div><script>function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("11/25/2018 08:18:26"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="本站已勉强运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("TCcAB5wC7Rjx4Xe9aFUYiMUU-gzGzoHsz","pC764tcMRXbraCg5anMgT3QF")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><style>#wenkmTips{position:fixed;font-size:1.4em;text-shadow:none;border-radius:0 5px 5px 0;z-index:5000;top:10px;left:0;background-color:rgba(13,159,203,.6);padding:15px;color:#fff;-webkit-transition:.5s;-moz-transition:.5s;-ms-transition:.5s;transition:.5s;-webkit-transform:translate3d(-100%,0,0);-moz-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}#wenkmTips.show{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.backtop{position:absolute;top:50%;z-index:3;clear:both;display:none;margin-top:-50px;margin-left:0;idth:68px;height:100px;background:url(https://huiprogramer.gitee.io/images/backtop.png)}</style><script type="text/javascript">function lanye_popup_box(){$("#lanye_popup_bg").fadeIn(800),$("#lanye_popup_bg").after("<div class=lanye_popup_box><h2><strong>支付宝扫码领红包</strong><span class=lanye_popup_closebox onclick=lanye_popup_closebox();></span></h2><div class=lanye_popup_boxcont><div style = 'padding:0px 12px 0px 12px;'>打开支付宝扫描二维码领取红包或者在支付宝首页输入<font color=red>1347239</font>搜索领取红包，每天可领取一次哦。</div><p style=padding-top:5px;padding-bottom:5px;text-align:center><img referrerpolicy='no-referrer' style=width:260px;height:auto; src=https://ws4.sinaimg.cn/large/006MOU0zgy1g23dhnc12bj30fs0nojtf.jpg /></p></div></div>"),$(".hb_box").fadeIn()}function lanye_popup_closebox(){$(".lanye_popup_box").remove(),$("#lanye_popup_bg").fadeOut(800)}$(document).ready(function(){$(".lanye_popup_close").click(function(){$(".lanye_popup_box").fadeOut()}),$(".lanye_popup_closetop").click(function(){$(".lanye_popup_top").remove()})}),$("meta[name='generator']").prop("content","在线生成").prop("name","在线分享网"),$(function(){setTimeout(function(){$("#cnzz_stat_icon_1277040022 a").css("border-bottom","none"),$("#cnzz_stat_icon_1277040022 a").css("color","#999")},1e3)})</script><script id="cy_cmt_num" async src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyu7tijsf"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script async type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script async type="text/javascript" src="/js/src/fireworks.js"></script></body></html><!-- rebuild by neat -->