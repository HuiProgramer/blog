<!-- build time:Tue Oct 13 2020 21:46:50 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><script>!function(){var t,e="在线分享网";document.addEventListener("visibilitychange",function(){document.hidden?(document.title="您去哪里了！",clearTimeout(t)):(document.title="在线分享网欢迎您",t=setTimeout(function(){document.title=e},2e3))})}()</script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script></script><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/icon.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/icon.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/icon.png?v=5.1.4"><link rel="mask-icon" href="/icon.png?v=5.1.4" color="#222"><meta name="keywords" content="Mybatis,Mybatis-Plus,"><link rel="alternate" href="/atom.xml" title="在线分享网" type="application/atom+xml"><meta name="description" content="mybatis-plus简介：Mybatis-Plus（简称MP）是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus官网。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。"><meta name="keywords" content="Mybatis,Mybatis-Plus"><meta property="og:type" content="article"><meta property="og:title" content="Mybatis-Plus必知必会"><meta property="og:url" content="https://me.obey.fun/Mybatis-Plus必知必会.html"><meta property="og:site_name" content="在线分享网"><meta property="og:description" content="mybatis-plus简介：Mybatis-Plus（简称MP）是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus官网。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-2a0d958939bdcde8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/863/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-8eecfba7c07de941.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/749/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-a4a6dd1a9a0dfa85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/710/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-e6189c835369c081.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/690/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-e0d8379c8cb1b769.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/668/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-ec05bfdca3f421e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/631/format/webp"><meta property="og:image" content="https:////upload-images.jianshu.io/upload_images/11531502-c4379c86e50b7b4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/655/format/webp"><meta property="og:updated_time" content="2020-05-30T02:24:41.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Mybatis-Plus必知必会"><meta name="twitter:description" content="mybatis-plus简介：Mybatis-Plus（简称MP）是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考mybatis-plus官网。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。"><meta name="twitter:image" content="https:////upload-images.jianshu.io/upload_images/11531502-2a0d958939bdcde8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/863/format/webp"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"2931888f"}),daovoice("update")</script><link rel="canonical" href="https://me.obey.fun/Mybatis-Plus必知必会.html"><title>Mybatis-Plus必知必会 | 在线分享网</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div id="particles-js"></div><div class="container sidebar-position-left page-post-detail"><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">在线分享网</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">分享，成为你我之间的快乐！</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档 <span class="badge">47</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签 <span class="badge">33</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类 <span class="badge">29</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-comments"></i><br>留言板</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-address-book-o"></i><br>友情链接</a></li><li class="menu-item menu-item-share"><a href="https://www.52share.online" rel="section"><i class="menu-item-icon fa fa-fw fa-hand-o-right"></i><br>资源分享</a></li><li class="menu-item menu-item-topx"><a href="/topx/" rel="section"><i class="menu-item-icon fa fa-fw fa-line-chart"></i><br>热度排序</a></li><li id="search" class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><div id="lanye_popup_bg" onclick="lanye_popup_closebox()" style="display:none"></div><div class="lanye_popup_top"><a style="border-bottom:0" href="javascript:lanye_popup_box();" target="_blank" rel="external nofollow"></a><div class="lanye_popup_closetop"></div></div><script async src="/js/src/ribbon.js" type="text/javascript"></script><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://me.obey.fun/Mybatis-Plus必知必会.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="HuiProgramer"><meta itemprop="description" content=""><meta itemprop="image" content="https://huiprogramer.gitee.io/medias/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="在线分享网"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Mybatis-Plus必知必会</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-03T20:54:29+08:00">2020-05-03 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2020-05-30T10:24:41+08:00">2020-05-30 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Mybatis-Plus/" itemprop="url" rel="index"><span itemprop="name">Mybatis-Plus</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Mybatis-Plus/ORM/" itemprop="url" rel="index"><span itemprop="name">ORM</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span>评论: <span id="sourceId::Mybatis-Plus必知必会" class="cy_cmt_count"></span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">7.7k 字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">33 分钟 </span><span id="/Mybatis-Plus必知必会.html" class="leancloud_visitors" data-flag-title="Mybatis-Plus必知必会"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-thermometer-1"></i> </span><span class="post-meta-item-text">热度&#58;</span> <span class="leancloud-visitors-count"></span> <span>℃</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="mybatis-plus简介："><a href="#mybatis-plus简介：" class="headerlink" title="mybatis-plus简介："></a>mybatis-plus简介：</h1><p>Mybatis-Plus（简称MP）是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考<a href="https://mp.baomidou.com" target="_blank" rel="noopener">mybatis-plus官网</a>。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。</p><h1 id="spring整合mybatis-plus"><a href="#spring整合mybatis-plus" class="headerlink" title="spring整合mybatis-plus:"></a>spring整合mybatis-plus:</h1><p>正如官方所说，mybatis-plus在mybatis的基础上只做增强不做改变，因此其与spring的整合亦非常简单。只需把mybatis的依赖换成mybatis-plus的依赖，再把sqlSessionFactory换成mybatis-plus的即可。接下来看具体操作：<br><strong>1、pom.xml:</strong><br>核心依赖如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mp 依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong>这些是核心依赖，本项目还用到了mysql驱动、c3p0、日志（slf4j-api，slf4j-log4j2）、lombok。集成mybatis-plus要把mybatis、mybatis-spring去掉，避免冲突；lombok是一个工具，添加了这个依赖，开发工具再安装Lombok插件，就可以使用它了，最常用的用法就是在实体类中使用它的@Data注解，这样实体类就不用写set、get、toString等方法了。关于Lombok的更多用法，请自行百度。</p><p><strong>2、log4j.xml:</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">"http://jakarta.apache.org/log4j/"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"STDOUT"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Encoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%-5p %d&#123;MM-dd</span></span></span><br><span class="line"><span class="tag"><span class="string">HH:mm:ss,SSS&#125; %m (%F:%L) \n"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"java.sql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.apache.ibatis"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"info"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"STDOUT"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3、jdbc.properties:</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=<span class="symbol">jdbc:</span><span class="symbol">mysql:</span>/<span class="regexp">//</span>数据库名?useUnicode=<span class="literal">true</span>&amp;characterEncoding=utf8</span><br><span class="line">jdbc.username=<span class="comment">#</span></span><br><span class="line">jdbc.password=<span class="comment">#</span></span><br></pre></td></tr></table></figure><p><strong>4、mybatis-config.xml:</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>因为是与spring整合，所有mybatis-plus的大部分都写在spring的配置文件中，这里定义一个空的mybatis-config.xml即可。</p><p><strong>5、spring-dao.xml:</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>    </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:jee</span>=<span class="string">"http://www.springframework.org/schema/jee"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"    </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd"</span>&gt;</span>    </span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!-- 配置整合mybatis-plus过程 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1、配置数据库相关参数properties的属性：$&#123;url&#125; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2、配置数据库连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis的sqlsessionFactorybean：org.mybatis.spring.SqlSessionFactoryBean--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3、配置mybatis-plus的sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.zhu.mybatisplus.entity"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4、DAO接口所在包名，Spring会自动查找其下的类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.zhu.mybatisplus.dao"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>6、entity:</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = <span class="meta-string">"tb_employee"</span>)</span><span class="comment">//指定表名</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="comment">//value与数据库主键列名一致，若实体类属性名与表主键列名一致可省略value</span></span><br><span class="line">    <span class="meta">@TableId(value = <span class="meta-string">"id"</span>,type = IdType.AUTO)</span><span class="comment">//指定自增策略</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">//若没有开启驼峰命名，或者表中列名不符合驼峰规则，可通过该注解指定数据库表中的列名，exist标明数据表中有没有对应列</span></span><br><span class="line">    <span class="meta">@TableField(value = <span class="meta-string">"last_name"</span>,exist = true)</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7、mapper:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmplopyeeDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样就完成了mybatis-plus与spring的整合。首先是把mybatis和mybatis-spring依赖换成mybatis-plus的依赖，然后把sqlsessionfactory换成mybatis-plus的，然后实体类中添加<code>@TableName</code>、<code>@TableId</code>等注解，最后mapper继承<code>BaseMapper</code>即可。</p><p><strong>8、测试：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(&#123;<span class="string">"classpath:spring/spring-dao.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行该junit，可输出获取到的连接，说明整合没问题：</p><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-2a0d958939bdcde8.png?imageMogr2/auto-orient/strip|imageView2/2/w/863/format/webp" alt="img"></p><p>本文所有代码本人均亲自测试过，本文涉及代码又较多，为了不影响篇幅，故非必要处不再截图。接下来的所有操作都是基于此整合好的项目。</p><h1 id="mp的通用crud"><a href="#mp的通用crud" class="headerlink" title="mp的通用crud:"></a>mp的通用crud:</h1><p><strong>需求：</strong><br>存在一张 tb_employee 表，且已有对应的实体类 Employee，实现tb_employee 表的 CRUD 操作我们需要做什么呢？<br><strong>基于 Mybatis：</strong><br>需要编写 EmployeeMapper 接口，并在 EmployeeMapper.xml 映射文件中手动编写 CRUD 方法对应的sql语句。<br><strong>基于 MP：</strong><br>只需要创建 EmployeeMapper 接口, 并继承 BaseMapper 接口。<br>我们已经有了Employee、tb_employee了，并且EmployeeDao也继承了BaseMapper了，接下来就使用crud方法。</p><p><strong>1、insert操作：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(&#123;<span class="string">"classpath:spring/spring-dao.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmplopyeeDao emplopyeeDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setLastName(<span class="string">"东方不败"</span>);</span><br><span class="line">        employee.setEmail(<span class="string">"dfbb@163.com"</span>);</span><br><span class="line">        employee.setGender(<span class="number">1</span>);</span><br><span class="line">        employee.setAge(<span class="number">20</span>);</span><br><span class="line">        emplopyeeDao.insert(employee);</span><br><span class="line">        <span class="comment">//mybatisplus会自动把当前插入对象在数据库中的id写回到该实体中</span></span><br><span class="line">        System.out.println(employee.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行添加操作，直接调用insert方法传入实体即可。</p><p><strong>2、update操作：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setId(<span class="number">1</span>);</span><br><span class="line">        employee.setLastName(<span class="string">"更新测试"</span>);</span><br><span class="line">        <span class="comment">//emplopyeeDao.updateById(employee);//根据id进行更新，没有传值的属性就不会更新</span></span><br><span class="line">        emplopyeeDao.updateAllColumnById(employee);<span class="comment">//根据id进行更新，没传值的属性就更新为null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>注意这两个update操作的区别，<code>updateById</code>方法，没有传值的字段不会进行更新，比如只传入了lastName，那么age、gender等属性就会保留原来的值；<code>updateAllColumnById</code>方法，顾名思义，会更新所有的列，没有传值的列会更新为null。</p><p><strong>3、select操作：</strong></p><p><strong>(1)、</strong>根据id查询：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee employee = emplopyeeDao.selectById(1);</span><br></pre></td></tr></table></figure><p><strong>(2)、</strong>根据条件查询一条数据：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Employee employeeCondition = <span class="keyword">new</span> Employee();</span><br><span class="line">employeeCondition.setId(<span class="number">1</span>);</span><br><span class="line">employeeCondition.setLastName(<span class="string">"更新测试"</span>);</span><br><span class="line"><span class="comment">//若是数据库中符合传入的条件的记录有多条，那就不能用这个方法，会报错</span></span><br><span class="line">Employee employee = emplopyeeDao.selectOne(employeeCondition);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>这个方法的sql语句就是<code>where id = 1 and last_name = 更新测试</code>，若是符合这个条件的记录不止一条，那么就会报错。</p><p><strong>(3)、</strong>根据查询条件返回多条数据：<br>当符合指定条件的记录数有多条时，上面那个方法就会报错，就应该用这个方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt; columnMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">columnMap.put(<span class="string">"last_name"</span>,<span class="string">"东方不败"</span>);<span class="comment">//写表中的列名</span></span><br><span class="line">columnMap.put(<span class="string">"gender"</span>,<span class="string">"1"</span>);</span><br><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectByMap(columnMap);</span><br><span class="line">System.out.println(employees.size());</span><br></pre></td></tr></table></figure><p><strong>注：</strong>查询条件用map集合封装，columnMap，写的是数据表中的列名，而非实体类的属性名。比如属性名为lastName，数据表中字段为last_name，这里应该写的是last_name。selectByMap方法返回值用list集合接收。</p><p><strong>(4)、</strong>通过id批量查询：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; idList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">1</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">2</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">3</span>);</span><br><span class="line">List&lt;Employee&gt; employees = emplopyeeDao.selectBatchIds(idList);</span><br><span class="line">System.<span class="keyword">out</span>.println(employees);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>把需要查询的id都add到list集合中，然后调用selectBatchIds方法，传入该list集合即可，该方法返回的是对应id的所有记录，所有返回值也是用list接收。</p><p><strong>(5)、</strong>分页查询：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; employees = emplopyeeDao.selectPage(<span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">2</span>),<span class="literal">null</span>);</span><br><span class="line">System.<span class="keyword">out</span>.println(employees);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>selectPage方法就是分页查询，在page中传入分页信息，后者为null的分页条件，这里先让其为null，讲了条件构造器再说其用法。这个分页其实并不是物理分页，而是内存分页。也就是说，查询的时候并没有limit语句。等配置了分页插件后才可以实现真正的分页。</p><p><strong>4、delete操作：</strong></p><p><strong>(1)、</strong>根据id删除：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">emplopyeeDao</span><span class="selector-class">.deleteById</span>(1);</span><br></pre></td></tr></table></figure><p><strong>(2)、</strong>根据条件删除：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt; columnMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">columnMap.put(<span class="string">"gender"</span>,<span class="number">0</span>);</span><br><span class="line">columnMap.put(<span class="string">"age"</span>,<span class="number">18</span>);</span><br><span class="line">emplopyeeDao.deleteByMap(columnMap);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该方法与selectByMap类似，将条件封装在columnMap中，然后调用deleteByMap方法，传入columnMap即可，返回值是Integer类型，表示影响的行数。</p><p><strong>(3)、</strong>根据id批量删除：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; idList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">1</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">2</span>);</span><br><span class="line">emplopyeeDao.deleteBatchIds(idList);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该方法和selectBatchIds类似，把需要删除的记录的id装进idList，然后调用deleteBatchIds，传入idList即可。</p><h1 id="全局策略配置："><a href="#全局策略配置：" class="headerlink" title="全局策略配置："></a>全局策略配置：</h1><p>通过上面的小案例我们可以发现，实体类需要加@TableName注解指定数据库表名，通过@TableId注解指定id的增长策略。实体类少倒也无所谓，实体类一多的话也麻烦。所以可以在spring-dao.xml的文件中进行全局策略配置。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 5、mybatisplus的全局策略配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"globalConfiguration"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.entity.GlobalConfiguration"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2.3版本后，驼峰命名默认值就是true，所以可不配置 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="dbColumnUnderline" value="true"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 全局主键自增策略，0表示auto --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idType"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 全局表前缀配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"tablePrefix"</span> <span class="attr">value</span>=<span class="string">"tb_"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里配置了还没用，还需要在sqlSessionFactory中注入配置才会生效。如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 3、配置mybatisplus的sqlSessionFactory --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.zhu.mybatisplus.entity"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入全局配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"globalConfig"</span> <span class="attr">ref</span>=<span class="string">"globalConfiguration"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如此一来，实体类中的@TableName注解和@TableId注解就可以去掉了。</p><h1 id="条件构造器-EntityWrapper-："><a href="#条件构造器-EntityWrapper-：" class="headerlink" title="条件构造器(EntityWrapper)："></a>条件构造器(EntityWrapper)：</h1><p>以上基本的 CRUD 操作，我们仅仅需要继承一个 BaseMapper 即可实现大部分单表 CRUD 操作。BaseMapper 提供了多达 17 个方法供使用, 可以极其方便的实现单一、批量、分页等操作，极大的减少开发负担。但是mybatis-plus的强大不限于此，请看如下需求该如何处理：<br><strong>需求：</strong><br>我们需要分页查询 tb_employee 表中，年龄在 18~50 之间性别为男且姓名为 xx 的所有用户，这时候我们该如何实现上述需求呢？<br><strong>使用MyBatis :</strong> 需要在 SQL 映射文件中编写带条件查询的 SQL,并用PageHelper 插件完成分页. 实现以上一个简单的需求，往往需要我们做很多重复单调的工作。<br><strong>使用MP:</strong> 依旧不用编写 SQL 语句，MP 提供了功能强大的条件构造器 —— EntityWrapper。</p><p><strong>接下来就直接看几个案例体会EntityWrapper的使用。</strong></p><p><strong>1、分页查询年龄在18 - 50且gender为0、姓名为tom的用户：</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectPage(<span class="keyword">new</span> Page&lt;Employee&gt;(<span class="number">1</span>,<span class="number">3</span>),</span><br><span class="line">     <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">        .between(<span class="string">"age"</span>,<span class="number">18</span>,<span class="number">50</span>)</span><br><span class="line">        .eq(<span class="string">"gender"</span>,<span class="number">0</span>)</span><br><span class="line">        .eq(<span class="string">"last_name"</span>,<span class="string">"tom"</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>由此案例可知，分页查询和之前一样，new 一个page对象传入分页信息即可。至于分页条件，new 一个EntityWrapper对象，调用该对象的相关方法即可。between方法三个参数，分别是column、value1、value2，该方法表示column的值要在value1和value2之间；eq是equals的简写，该方法两个参数，column和value，表示column的值和value要相等。注意column是数据表对应的字段，而非实体类属性字段。</p><p><strong>2、查询gender为0且名字中带有老师、或者邮箱中带有a的用户：</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectList(</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">               .eq(<span class="string">"gender"</span>,<span class="number">0</span>)</span><br><span class="line">               .like(<span class="string">"last_name"</span>,<span class="string">"老师"</span>)</span><br><span class="line">                <span class="comment">//.or()//和or new 区别不大</span></span><br><span class="line">               .orNew()</span><br><span class="line">               .like(<span class="string">"email"</span>,<span class="string">"a"</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>未说分页查询，所以用selectList即可，用EntityWrapper的like方法进行模糊查询，like方法就是指column的值包含value值，此处like方法就是查询last_name中包含“老师”字样的记录；“或者”用or或者orNew方法表示，这两个方法区别不大，用哪个都可以，可以通过控制台的sql语句自行感受其区别。</p><p><strong>3、查询gender为0，根据age排序，简单分页：</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectList(</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">                .eq(<span class="string">"gender"</span>,<span class="number">0</span>)</span><br><span class="line">                .orderBy(<span class="string">"age"</span>)<span class="comment">//直接orderby 是升序，asc</span></span><br><span class="line">                .last(<span class="string">"desc limit 1,3"</span>)<span class="comment">//在sql语句后面追加last里面的内容(改为降序，同时分页)</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>简单分页是指不用page对象进行分页。orderBy方法就是根据传入的column进行升序排序，若要降序，可以使用orderByDesc方法，也可以如案例中所示用last方法；last方法就是将last方法里面的value值追加到sql语句的后面，在该案例中，最后的sql语句就变为<code>select ······ order by desc limit 1, 3</code>，追加了<code>desc limit 1,3</code>所以可以进行降序排序和分页。</p><p><strong>4、分页查询年龄在18 - 50且gender为0、姓名为tom的用户：</strong><br>条件构造器除了EntityWrapper，还有Condition。用Condition来处理一下这个需求：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectPage(</span><br><span class="line">               <span class="keyword">new</span> Page&lt;Employee&gt;(<span class="number">1</span>,<span class="number">2</span>),</span><br><span class="line">               Condition.create()</span><br><span class="line">                       .between(<span class="string">"age"</span>,<span class="number">18</span>,<span class="number">50</span>)</span><br><span class="line">                       .eq(<span class="string">"gender"</span>,<span class="string">"0"</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>Condition和EntityWrapper的区别就是，创建条件构造器时，EntityWrapper是new出来的，而Condition是调create方法创建出来。</p><p><strong>5、根据条件更新：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testEntityWrapperUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setLastName(<span class="string">"苍老师"</span>);</span><br><span class="line">        employee.setEmail(<span class="string">"cjk@sina.com"</span>);</span><br><span class="line">        employee.setGender(<span class="number">0</span>);</span><br><span class="line">        emplopyeeDao.update(employee,</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">                .eq(<span class="string">"last_name"</span>,<span class="string">"tom"</span>)</span><br><span class="line">                .eq(<span class="string">"age"</span>,<span class="number">25</span>)</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该案例表示把last_name为tom，age为25的所有用户的信息更新为employee中设置的信息。</p><p><strong>6、根据条件删除：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">emplopyeeDao.<span class="keyword">delete</span>(</span><br><span class="line">        <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">        .eq(<span class="string">"last_name"</span>,<span class="string">"tom"</span>)</span><br><span class="line">        .eq(<span class="string">"age"</span>,<span class="number">16</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该案例表示把last_name为tom、age为16的所有用户删除。</p><p>odel类，重写pkVal方法。</p><p><strong>2、mapper:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>虽然AR模式用不到该接口，但是一定要定义，否则使用AR时会报空指针异常。</p><h1 id="ActiveRecord"><a href="#ActiveRecord" class="headerlink" title="ActiveRecord:"></a>ActiveRecord:</h1><p>Active Record(活动记录)，是一种领域模型模式，特点是一个模型类对应关系型数据库中的一个表，而模型类的一个实例对应表中的一行记录。ActiveRecord 一直广受动态语言（ PHP 、 Ruby 等）的喜爱，而 Java 作为准静态语言，对于 ActiveRecord 往往只能感叹其优雅，所以 MP 也在 AR 道路上进行了一定的探索，仅仅需要让实体类继承 Model 类且实现主键指定方法，即可开启 AR 之旅。接下来看具体代码：</p><p><strong>1、entity:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="comment">//重写这个方法，return当前类的主键</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Serializable <span class="title">pkVal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>实体类继承Model类，重写pkVal方法。</p><p><strong>2、mapper:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>虽然AR模式用不到该接口，但是一定要定义，否则使用AR时会报空指针异常。</p><p><strong>3、使用AR:</strong></p><p><strong>(1)、</strong>AR插入操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(&#123;<span class="string">"classpath:spring/spring-dao.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAR</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testArInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setName(<span class="string">"林青霞"</span>);</span><br><span class="line">        user.setAge(<span class="number">22</span>);</span><br><span class="line">        user.setGender(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">boolean</span> result = user.insert();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-8eecfba7c07de941.png?imageMogr2/auto-orient/strip|imageView2/2/w/749/format/webp" alt="img"></p><p>image.png</p><p><strong>注：</strong>可以看到我们并不需要注入mapper接口，不过正如刚才所说，不使用但还是要定义，否则会报错。AR操作是通过对象本身调用相关方法，比如要insert一个user，那就用这个user调用insert方法即可。返回值为布尔类型，由上图可看到返回了true，是操作成功的。</p><p><strong>(2)、</strong>AR更新操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testArUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1</span>);</span><br><span class="line">    user.setName(<span class="string">"刘亦菲"</span>);</span><br><span class="line">    <span class="keyword">boolean</span> result = user.updateById();</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>user调用updateById方法，将id为1的用户进行更新。</p><p><strong>(3)、</strong>AR查询操作：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testArSelect</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    <span class="comment">//1、根据id查询</span></span><br><span class="line">    <span class="comment">//user = user.selectById(1);</span></span><br><span class="line">    <span class="comment">//或者这样用</span></span><br><span class="line">    <span class="comment">//user.setId(1);</span></span><br><span class="line">    <span class="comment">//user = user.selectById();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、查询所有</span></span><br><span class="line">    <span class="comment">//List&lt;User&gt; users = user.selectAll();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、根据条件查询</span></span><br><span class="line">    <span class="comment">//List&lt;User&gt; users = user.selectList(new EntityWrapper&lt;User&gt;().like("name","刘"));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//4、查询符合条件的总数</span></span><br><span class="line">    <span class="keyword">int</span> result = user.selectCount(<span class="keyword">new</span> EntityWrapper&lt;User&gt;().eq(<span class="string">"gender"</span>,<span class="number">1</span>));</span><br><span class="line">    System.<span class="keyword">out</span>.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>上面的代码涉及到了四个不同的查询操作，其实用法与MP的BaseMapper提供的方法的用法差不多，只不过这里是实体对象调用。</p><p><strong>(4)、</strong>AR删除操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testArDelete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        <span class="comment">//删除数据库中不存在的数据也是返回true</span></span><br><span class="line">        <span class="comment">//1、根据id删除数据</span></span><br><span class="line">        <span class="comment">//boolean result = user.deleteById(1);</span></span><br><span class="line">        <span class="comment">//或者这样写</span></span><br><span class="line">        <span class="comment">//user.setId(1);</span></span><br><span class="line">        <span class="comment">//boolean result = user.deleteById();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、根据条件删除</span></span><br><span class="line">        <span class="keyword">boolean</span> result = user.delete(<span class="keyword">new</span> EntityWrapper&lt;User&gt;().like(<span class="string">"name"</span>,<span class="string">"玲"</span>));</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>这里介绍了两个删除方法，代码中已有注释说明。需要注意的是，删除数据库中不存在的数据，结果也是true。</p><p><strong>(5)、</strong>AR分页操作：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testArPage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       User user = <span class="keyword">new</span> User();</span><br><span class="line">       Page&lt;User&gt; page =</span><br><span class="line">               user.selectPage(<span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">4</span>),</span><br><span class="line">               <span class="keyword">new</span> EntityWrapper&lt;User&gt;().like(<span class="string">"name"</span>,<span class="string">"刘"</span>));</span><br><span class="line">       List&lt;User&gt; users = page.getRecords();</span><br><span class="line">       System.<span class="keyword">out</span>.println(users);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>这个分页方法和BaseMapper提供的分页一样都是内存分页，并非物理分页，因为sql语句中没用limit，和BaseMapper的selectPage方法一样，配置了分页插件后就可以实现真正的物理分页。AR的分页方法与BaseMapper提供的分页方法不同的是，BaseMapper的selectPage方法返回值是查询到的记录的list集合，而AR的selectPage方法返回的是page对象，该page对象封装了查询到的信息，可以通过getRecords方法获取信息。</p><h1 id="插件的配置："><a href="#插件的配置：" class="headerlink" title="插件的配置："></a>插件的配置：</h1><p>MP提供了很多好用的插件，而且配置简单，使用方便。接下来一起看看MP的插件如何使用。</p><p><strong>1、分页插件：</strong><br>之前就有说到，BaseMapper的selectPage方法和AR提供的selectPage方法都不是物理分页，需要配置分页插件后才是物理分页，那么现在就来看看如何配置这个插件。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 3、配置mybatisplus的sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=</span></span><br><span class="line"><span class="tag">                       "<span class="attr">com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean</span>"&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.zhu.mybatisplus.entity"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入全局配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"globalConfig"</span> <span class="attr">ref</span>=<span class="string">"globalConfiguration"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置插件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 分页插件 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.plugins.PaginationInterceptor"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>在sqlSessionFactory这个bean中，通过<code>&lt;property name=&quot;plugins&quot;&gt;</code>配置插件，接下来的所有插件都配置在这个list中。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">//配置了分页插件后，还是和以前一样的使用selectpage方法，</span></span><br><span class="line">        <span class="comment">//但是现在就是真正的物理分页了，sql语句中有limit了</span></span><br><span class="line">        Page&lt;Employee&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        List&lt;Employee&gt; employeeList =</span><br><span class="line">                emplopyeeDao.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(employeeList);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"================= 相关的分页信息 =================="</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"总条数:"</span> + page.getTotal());</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"当前页码:"</span> + page.getCurrent());</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"总页数:"</span> + page.getPages());</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"每页显示条数:"</span> + page.getSize());</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"是否有上一页:"</span> + page.hasPrevious());</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"是否有下一页:"</span> + page.hasNext());</span><br><span class="line">        <span class="comment">//还可以将查询到的结果set进page对象中</span></span><br><span class="line">        page.setRecords(employeeList);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-a4a6dd1a9a0dfa85.png?imageMogr2/auto-orient/strip|imageView2/2/w/710/format/webp" alt="img"></p><p>由图可知，sql语句中已经有了limit，是物理分页了。</p><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-e6189c835369c081.png?imageMogr2/auto-orient/strip|imageView2/2/w/690/format/webp" alt="img"></p><p>也可以通过page调用相关方法获取到相关的分页信息，而且还可以把查询到的结果set回page对象中，方便前端使用。</p><p><strong>2、性能分析插件：</strong><br>在plugin的list中添加如下bean即可开启性能分析插件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 输出每条SQL语句及其执行时间，生产环境不建议使用该插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.plugins.PerformanceInterceptor"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span><span class="comment">&lt;!-- 格式化SQL语句 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTime"</span> <span class="attr">value</span>=<span class="string">"1000"</span>/&gt;</span><span class="comment">&lt;!-- sql执行时间超过value值就会停止执行，</span></span><br><span class="line"><span class="comment">                                                  单位是毫秒 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>这个性能分析插件配置了两个属性，第一个是格式化sql语句，设置为true后，sql语句格式就像上面的截图中的一样；第二个属性是sql语句执行的最大时间，超过value值就会报错，这里表示超过1000毫秒就会停止执行sql语句。</p><p><strong>3、执行分析插件：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果是对全表的删除或更新操作，就会终止该操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.plugins.SqlExplainInterceptor"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"stopProceed"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>这个插件配置了一个属性，stopProceed设置为true后，如果执行的是删除表中全部内容，那就会抛出异常，终止该操作。该插件主要是防止手抖误删数据。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSqlExplain</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//条件为null，就是删除全表，执行分析插件会终止该操作</span></span><br><span class="line">    emplopyeeDao.delete(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行该junit测试，可以看到报如下错误，说明该插件生效了。</p><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-e0d8379c8cb1b769.png?imageMogr2/auto-orient/strip|imageView2/2/w/668/format/webp" alt="img"></p><h1 id="MP的逆向工程："><a href="#MP的逆向工程：" class="headerlink" title="MP的逆向工程："></a>MP的逆向工程：</h1><p><strong>MyBatis 的代码生成器</strong>基于xml文件进行生成，可生成: 实体类、Mapper 接口、Mapper 映射文件。<br><strong>MP 的代码生成器</strong>基于Java代码进行生成，可生成: 实体类(可以选择是否支持 AR)、Mapper 接口、Mapper 映射文件、 Service 层、Controller 层。<br><strong>1、添加依赖：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.37<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mp 依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatisplus逆向工程需要模板引擎，用freemaker也行 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>上面是必须的三个依赖，为了可以在控制台直观的看到生成情况，可以添加日志包(slf4j-api和slf4j-log4j2)，为了让生成的代码不会报错，还可以根据情况添加spring相关的依赖、lombok依赖等。</p><p><strong>2、生成器示例代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGenerator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1、全局配置</span></span><br><span class="line">        GlobalConfig config = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        config.setActiveRecord(<span class="keyword">true</span>)<span class="comment">//开启AR模式</span></span><br><span class="line">              .setAuthor(<span class="string">"huiprogramer"</span>)<span class="comment">//设置作者</span></span><br><span class="line">              <span class="comment">//生成路径(一般都是生成在此项目的src/main/java下面)</span></span><br><span class="line">              .setOutputDir(<span class="string">"E:\\develop\\Java\\workspace\\ideaworkspace\\mpg\\src\\main\\java"</span>)</span><br><span class="line">              .setFileOverride(<span class="keyword">true</span>)<span class="comment">//第二次生成会把第一次生成的覆盖掉</span></span><br><span class="line">              .setIdType(IdType.AUTO)<span class="comment">//主键策略</span></span><br><span class="line">              .setServiceName(<span class="string">"%sService"</span>)<span class="comment">//生成的service接口名字首字母是否为I，这样设置就没有I</span></span><br><span class="line">              .setBaseResultMap(<span class="keyword">true</span>)<span class="comment">//生成resultMap</span></span><br><span class="line">              .setBaseColumnList(<span class="keyword">true</span>);<span class="comment">//在xml中生成基础列</span></span><br><span class="line">        <span class="comment">//2、数据源配置</span></span><br><span class="line">        DataSourceConfig dataSourceConfig = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        dataSourceConfig.setDbType(DbType.MYSQL)<span class="comment">//数据库类型</span></span><br><span class="line">                        .setDriverName(<span class="string">"com.mysql.jdbc.Driver"</span>)</span><br><span class="line">                        .setUrl(<span class="string">"jdbc:mysql:///数据库名"</span>)</span><br><span class="line">                        .setUsername(<span class="string">"数据库用户名"</span>)</span><br><span class="line">                        .setPassword(<span class="string">"数据库密码"</span>);</span><br><span class="line">        <span class="comment">//3、策略配置</span></span><br><span class="line">        StrategyConfig strategyConfig = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        strategyConfig.setCapitalMode(<span class="keyword">true</span>)<span class="comment">//开启全局大写命名</span></span><br><span class="line">                      .setDbColumnUnderline(<span class="keyword">true</span>)<span class="comment">//表名字段名使用下划线</span></span><br><span class="line">                      .setNaming(NamingStrategy.underline_to_camel)<span class="comment">//下划线到驼峰的命名方式</span></span><br><span class="line">                      .setTablePrefix(<span class="string">"tb_"</span>)<span class="comment">//表名前缀</span></span><br><span class="line">                      .setEntityLombokModel(<span class="keyword">true</span>)<span class="comment">//使用lombok</span></span><br><span class="line">                      .setInclude(<span class="string">"表1"</span>,<span class="string">"表2"</span>);<span class="comment">//逆向工程使用的表</span></span><br><span class="line">        <span class="comment">//4、包名策略配置</span></span><br><span class="line">        PackageConfig packageConfig = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        packageConfig.setParent(<span class="string">"com.zhu.mpg"</span>)<span class="comment">//设置包名的parent</span></span><br><span class="line">                     .setMapper(<span class="string">"mapper"</span>)</span><br><span class="line">                     .setService(<span class="string">"service"</span>)</span><br><span class="line">                     .setController(<span class="string">"controller"</span>)</span><br><span class="line">                     .setEntity(<span class="string">"entity"</span>)</span><br><span class="line">                     .setXml(<span class="string">"mapper"</span>);<span class="comment">//设置xml文件的目录</span></span><br><span class="line">        <span class="comment">//5、整合配置</span></span><br><span class="line">        AutoGenerator autoGenerator = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line">        autoGenerator.setGlobalConfig(config)</span><br><span class="line">                     .setDataSource(dataSourceConfig)</span><br><span class="line">                     .setStrategy(strategyConfig)</span><br><span class="line">                     .setPackageInfo(packageConfig);</span><br><span class="line">        <span class="comment">//6、执行</span></span><br><span class="line">        autoGenerator.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>以上便是示例代码，只要运行该junit测试，就会生成entity、mapper接口、mapper的xml文件、service、serviceImpl、controller代码。每一个设置代码中均有详细注释，此处不再赘述。</p><h1 id="自定义全局操作："><a href="#自定义全局操作：" class="headerlink" title="自定义全局操作："></a>自定义全局操作：</h1><h5 id="AutoSqlInjector-："><a href="#AutoSqlInjector-：" class="headerlink" title="AutoSqlInjector ："></a>AutoSqlInjector ：</h5><p>BaseMapper提供了17个常用方法，但是有些需求这些方法还是不能很好的实现，那么怎么办呢？大家肯定会想到是在xml文件中写sql语句解决。这样确实可以，因为MP是只做增强不做改变，我们完全可以按照mybatis的原来的方式来解决。不过MP也提供了另一种解决办法，那就是自定义全局操作。所谓自定义全局操作，也就是我们可以在mapper中自定义一些方法，然后通过某些操作，让自定义的这个方法也能像BaseMapper的内置方法，供全局调用。接下来就看看如何实现(以deleteAll方法为例)。<br><strong>1、在mapper接口中定义方法：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmplopyeeDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这两个mapper接口中都定义了deleteAll方法。</p><p><strong>2、编写自定义注入类：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySqlInjector</span> <span class="keyword">extends</span> <span class="title">AutoSqlInjector</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inject</span><span class="params">(Configuration configuration, MapperBuilderAssistant builderAssistant, </span></span></span><br><span class="line"><span class="function"><span class="params">                              Class&lt;?&gt; mapperClass, Class&lt;?&gt; modelClass, TableInfo table)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* 添加一个自定义方法 */</span></span><br><span class="line">        deleteAllUser(mapperClass, modelClass, table);</span><br><span class="line">        System.out.println(table.getTableName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAllUser</span><span class="params">(Class&lt;?&gt; mapperClass, Class&lt;?&gt; modelClass, TableInfo table)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* 执行 SQL ，动态 SQL 参考类 SqlMethod */</span></span><br><span class="line">        String sql = <span class="string">"delete from "</span> + table.getTableName();</span><br><span class="line">        <span class="comment">/* mapper 接口方法名一致 */</span></span><br><span class="line">        String method = <span class="string">"deleteAll"</span>;</span><br><span class="line">        SqlSource sqlSource = languageDriver.createSqlSource(configuration, sql, modelClass);</span><br><span class="line">        <span class="keyword">this</span>.addDeleteMappedStatement(mapperClass, method, sqlSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该类继承AutoSqlInjector，重写inject方法。然后编写sql语句，指定mapper接口中的方法，最后调用addDeleteMappedStatement方法即可。</p><p><strong>3、在spring配置文件中配置：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义自定义注入器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zhu.mybatisplus.injector.MySqlInjector"</span> <span class="attr">id</span>=<span class="string">"mySqlInjector"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 5、mybatisplus的全局策略配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"globalConfiguration"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.entity.GlobalConfiguration"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idType"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"tablePrefix"</span> <span class="attr">value</span>=<span class="string">"tb_"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入自定义全局操作 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlInjector"</span> <span class="attr">ref</span>=<span class="string">"mySqlInjector"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>先把刚才自定义的类注册成bean，然后在全局策略配置的bean中引用自定义类的bean即可。</p><p><strong>4、测试：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMySqlInjector</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Integer result = userDao.deleteAll();</span><br><span class="line">    System.<span class="keyword">out</span>.println(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMySqlInjector2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Integer result = emplopyeeDao.deleteAll();</span><br><span class="line">    System.<span class="keyword">out</span>.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>经测试，当userDao调用deleteAll方法时，会删除tb_user表的所有数据，employeeDao调用deleteAll方法时，会删除tb_employee表的所有数据。说明deleteAll方法是有效的。不过在运行这两个测试时，由于是全表删除操作，所有要先把执行分析插件关了。</p><h5 id="逻辑删除："><a href="#逻辑删除：" class="headerlink" title="逻辑删除："></a>逻辑删除：</h5><p>其实数据并不会轻易的删除掉，毕竟数据收集不易，所以就有了逻辑删除。逻辑删除: 并不会真正的从数据库中将数据删除掉，而是将当前被删除的这条数据中的一个逻辑删除字段置为删除状态，比如该数据有一个字段logic_flag，当其值为1表示未删除，值为-1表示删除，那么逻辑删除就是将1变成-1。<br><strong>1、数据表：</strong><br>在数据表中需要添加逻辑删除字段(logic_flag)。</p><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-ec05bfdca3f421e5.png?imageMogr2/auto-orient/strip|imageView2/2/w/631/format/webp" alt="img"></p><p><strong>2、实体类：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="meta">@TableLogic</span> <span class="comment">//标记逻辑删除属性</span></span><br><span class="line">    <span class="keyword">private</span> Integer logicFlag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>数据库中逻辑删除字段是logic_flag，所以实体类中的logicFlag需要用@TableLogic注解标记。</p><p><strong>3、mapper:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4、配置逻辑删除：</strong><br>需要在spring-dao.xml中做如下配置：<br>首先定义逻辑删除的bean：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 逻辑删除 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.mapper.LogicSqlInjector"</span> <span class="attr">id</span>=<span class="string">"logicSqlInjector"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>再在全局配置的bean中注入逻辑删除以及逻辑删除值：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 5、mybatisplus的全局策略配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"globalConfiguration"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.entity.GlobalConfiguration"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此处省略其他全局配置 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入自定义全局操作，做逻辑删除时需要先注释掉 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="sqlInjector" ref="mySqlInjector"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入逻辑删除，先要把自定义的注释掉 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlInjector"</span> <span class="attr">ref</span>=<span class="string">"logicSqlInjector"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入逻辑删除值 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"logicDeleteValue"</span> <span class="attr">value</span>=<span class="string">"-1"</span>/&gt;</span><span class="comment">&lt;!-- -1是删除状态 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"logicNotDeleteValue"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span><span class="comment">&lt;!-- 1是未删除状态 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>因为逻辑删除实际上也是一个sqlInjector，所以先要把刚才做自定义全局操作时注入的自定义全局操作注释掉，上面代码中已有详细注释说明。</p><p><strong>6、测试：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogicDelete</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Integer result = userDao.deleteById(<span class="number">1</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(result);</span><br><span class="line">        <span class="comment">//User user = userDao.selectById(1);</span></span><br><span class="line">        <span class="comment">//System.out.println(user);</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>运行该测试，执行删除操作的时候，真正执行的sql语句是<code>UPDATE tb_user SET logic_flag=-1 WHERE id=?</code>，就是把逻辑删除字段的值设置为-1；当逻辑删除字段的值是-1时再执行查询操作，sql是<code>SELECT ... FROM tb_user WHERE id=? AND logic_flag=1</code>，所以查询结果是null。</p><h1 id="公共字段自动填充："><a href="#公共字段自动填充：" class="headerlink" title="公共字段自动填充："></a>公共字段自动填充：</h1><p>我们知道，当我们进行插入或者更新操作时，没有设置值的属性，那么在数据表中要么是为null，要么是保留原来的值。有的时候我们我们没有赋值但是却不想让其为空，比如name属性，我们插入时会默认赋上“林志玲”，更新时会默认赋值上“朱茵”，那么就可以用公共字段自动填充。</p><p><strong>1、使用@TableField注解标记填充字段</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span><span class="comment">//插入和更新时填充</span></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure><p><strong>2、编写公共字段填充处理器类：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">extends</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        Object fieldValue = getFieldValByName(<span class="string">"name"</span>,metaObject); <span class="comment">//获取需要填充的字段</span></span><br><span class="line">        <span class="keyword">if</span>(fieldValue == <span class="keyword">null</span>)&#123;   <span class="comment">//如果该字段没有设置值</span></span><br><span class="line">            setFieldValByName(<span class="string">"name"</span>,<span class="string">"林志玲"</span>,metaObject); <span class="comment">//那就将其设置为"林志玲"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        Object fieldValue = getFieldValByName(<span class="string">"name"</span>,metaObject);<span class="comment">//获取需要填充的字段</span></span><br><span class="line">        <span class="keyword">if</span>(fieldValue == <span class="keyword">null</span>)&#123; <span class="comment">//如果该字段没有设置值</span></span><br><span class="line">            setFieldValByName(<span class="string">"name"</span>,<span class="string">"朱茵"</span>,metaObject);  <span class="comment">//那就将其设置为"朱茵"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注：</strong>该类继承了MetaObjectHandler类，重写了insertFill和updateFill方法，在这两个方法获取需要填充的字段以及默认填充的值。</p><p><strong>3、在spring-dao.xml中配置：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 公共字段填充处理器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zhu.mybatisplus.handler.MyMetaObjectHandler"</span> <span class="attr">id</span>=<span class="string">"myMetaObjectHandler"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 5、mybatisplus的全局策略配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"globalConfiguration"</span> <span class="attr">class</span>=<span class="string">"com.baomidou.mybatisplus.entity.GlobalConfiguration"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此处省略其他配置 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入公共字段填充处理器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"metaObjectHandler"</span> <span class="attr">ref</span>=<span class="string">"myMetaObjectHandler"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注：</strong>和配置逻辑删除一样，都是先将自定义的类注册成bean，再在全局策略配置中引用这个bean即可。</p><p><strong>4、测试：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHandlerInsert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setGender(<span class="number">1</span>);</span><br><span class="line">        user.setAge(<span class="number">22</span>);</span><br><span class="line">        user.setLogicFlag(<span class="number">1</span>);</span><br><span class="line">        userDao.insert(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https:////upload-images.jianshu.io/upload_images/11531502-c4379c86e50b7b4e.png?imageMogr2/auto-orient/strip|imageView2/2/w/655/format/webp" alt="img"></p><p><strong>注：</strong>可以看到，虽然我们并没有给name赋值，但是已经自动把“林志玲”传进去了。更新时也一样有效，此处就不将测试代码贴出来了。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> 在线分享网</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://me.obey.fun/Mybatis-Plus必知必会.html" title="Mybatis-Plus必知必会">https://me.obey.fun/Mybatis-Plus必知必会.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均为原创。转载请注明出处！</li></ul></div><div><div><blockquote class="blockquote-center" style="color:#ccc">-------------本文结束 <i class="fa fa-apple"></i> 感谢您的阅读-------------</blockquote></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div>文章对我有益，我要小额赞赏...</div><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.jpg" alt="HuiProgramer 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/alipay.jpg" alt="HuiProgramer 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div id="tags" class="post-tags"><a href="/tags/Mybatis/" rel="tag">Mybatis</a> <a href="/tags/Mybatis-Plus/" rel="tag">Mybatis-Plus</a></div><script type="text/javascript">for(var alltags=document.getElementById("tags"),tags=alltags.getElementsByTagName("a"),i=tags.length-1;i>=0;i--){var r=Math.floor(75*Math.random()+130),g=Math.floor(75*Math.random()+100),b=Math.floor(75*Math.random()+80);tags[i].style.background="rgb("+r+","+g+","+b+")"}var text="Mybatis-Plus必知必会";document.onreadystatechange=function(){"complete"==document.readyState&&wenkmTips.show("正在阅读 -> "+text)}</script><style type="text/css">.post-tags a{color:#fff;background-color:#f5f7f1;border-radius:6px;padding-right:10px;padding-left:10px;margin-right:5px;margin-left:0;margin-top:18px;margin-bottom:0}.post-tags a:before{content:"📜"}</style><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/SpringCloud简单入门.html" rel="next" title="SpringCloud简单入门"><i class="fa fa-chevron-left"></i> SpringCloud简单入门</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/初探RocketMQ.html" rel="prev" title="初探RocketMQ">初探RocketMQ <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><div title="返回顶部(或下方百分比按钮)" class="backtop" style="background-position:0 -1000px"></div><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="https://huiprogramer.gitee.io/medias/avatar.jpg" alt="HuiProgramer" referrerpolicy="no-referrer"><p class="site-author-name" itemprop="name">HuiProgramer</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">47</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">29</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">33</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a rel="external nofollow" href="https://github.com/HuiProgramer" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="mailto:huiprogramer@outlook.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://www.jianshu.com/u/1606b64f25b5" target="_blank" title="简书"><i class="fa fa-fw fa-heartbeat"></i>简书</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://cnblogs.com/HuiProgramer" target="_blank" title="博客园"><i class="fa fa-fw fa-book"></i>博客园</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 推荐阅读</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Git教程.html" title="Git教程" target="_blank">Git教程</a></li><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Markdown基本语法.html" title="Markdown基本语法" target="_blank">Markdown基本语法</a></li><li class="links-of-blogroll-item"><a rel="external nofollow" href="https://me.obey.fun/Java学习路线图.html" title="Java学习路线图" target="_blank">Java学习路线图</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#mybatis-plus简介："><span class="nav-number">1.</span> <span class="nav-text">mybatis-plus简介：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spring整合mybatis-plus"><span class="nav-number">2.</span> <span class="nav-text">spring整合mybatis-plus:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mp的通用crud"><span class="nav-number">3.</span> <span class="nav-text">mp的通用crud:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#全局策略配置："><span class="nav-number">4.</span> <span class="nav-text">全局策略配置：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#条件构造器-EntityWrapper-："><span class="nav-number">5.</span> <span class="nav-text">条件构造器(EntityWrapper)：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ActiveRecord"><span class="nav-number">6.</span> <span class="nav-text">ActiveRecord:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#插件的配置："><span class="nav-number">7.</span> <span class="nav-text">插件的配置：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MP的逆向工程："><span class="nav-number">8.</span> <span class="nav-text">MP的逆向工程：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自定义全局操作："><span class="nav-number">9.</span> <span class="nav-text">自定义全局操作：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#AutoSqlInjector-："><span class="nav-number">9.0.0.0.1.</span> <span class="nav-text">AutoSqlInjector ：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#逻辑删除："><span class="nav-number">9.0.0.0.2.</span> <span class="nav-text">逻辑删除：</span></a></li></ol></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#公共字段自动填充："><span class="nav-number">10.</span> <span class="nav-text">公共字段自动填充：</span></a></li></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">Copyright&copy; <span itemprop="copyrightYear">2018-2020</span> <span class="with-love" id="heart"><i class="fa fa-heart" style="color:#ff71a8"></i> </span><span class="author" itemprop="copyrightHolder">HuiProgramer</span></div><div><span id="days"></span> <span class="my-face">ღゝ◡╹)ノ♡</span></div><div><span id="busuanzi_container_site_pv" style="display:inline-block">总访问量： <span id="busuanzi_value_site_pv"></span> 次 <span class="post-meta-divider">|</span> </span><span id="busuanzi_container_site_uv" style="display:inline-block">访问人数：<span id="busuanzi_value_site_uv"></span> 人 <span class="post-meta-divider">|</span></span><div class="theme-info"><span class="post-count">字数统计：154.2k 字</span></div></div><div><span id="cnzz_stat_icon_1277385852"></span><script src="https://s23.cnzz.com/z_stat.php?id=1277385852&amp;online=1&amp;show=line" type="text/javascript"></script><script src="https://c.cnzz.com/core.php?web_id=1277385852&amp;show=line&amp;online=1&amp;t=z" charset="utf-8" type="text/javascript"></script></div><script>function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("11/25/2018 08:18:26"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="本站已勉强运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("TCcAB5wC7Rjx4Xe9aFUYiMUU-gzGzoHsz","pC764tcMRXbraCg5anMgT3QF")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><style>#wenkmTips{position:fixed;font-size:1.4em;text-shadow:none;border-radius:0 5px 5px 0;z-index:5000;top:10px;left:0;background-color:rgba(13,159,203,.6);padding:15px;color:#fff;-webkit-transition:.5s;-moz-transition:.5s;-ms-transition:.5s;transition:.5s;-webkit-transform:translate3d(-100%,0,0);-moz-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}#wenkmTips.show{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.backtop{position:absolute;top:50%;z-index:3;clear:both;display:none;margin-top:-50px;margin-left:0;idth:68px;height:100px;background:url(https://huiprogramer.gitee.io/images/backtop.png)}</style><script type="text/javascript">function lanye_popup_box(){$("#lanye_popup_bg").fadeIn(800),$("#lanye_popup_bg").after("<div class=lanye_popup_box><h2><strong>支付宝扫码领红包</strong><span class=lanye_popup_closebox onclick=lanye_popup_closebox();></span></h2><div class=lanye_popup_boxcont><div style = 'padding:0px 12px 0px 12px;'>打开支付宝扫描二维码领取红包或者在支付宝首页输入<font color=red>1347239</font>搜索领取红包，每天可领取一次哦。</div><p style=padding-top:5px;padding-bottom:5px;text-align:center><img referrerpolicy='no-referrer' style=width:260px;height:auto; src=https://ws4.sinaimg.cn/large/006MOU0zgy1g23dhnc12bj30fs0nojtf.jpg /></p></div></div>"),$(".hb_box").fadeIn()}function lanye_popup_closebox(){$(".lanye_popup_box").remove(),$("#lanye_popup_bg").fadeOut(800)}$(document).ready(function(){$(".lanye_popup_close").click(function(){$(".lanye_popup_box").fadeOut()}),$(".lanye_popup_closetop").click(function(){$(".lanye_popup_top").remove()})}),$("meta[name='generator']").prop("content","在线生成").prop("name","在线分享网"),$(function(){setTimeout(function(){$("#cnzz_stat_icon_1277040022 a").css("border-bottom","none"),$("#cnzz_stat_icon_1277040022 a").css("color","#999")},1e3)})</script><script id="cy_cmt_num" async src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyu7tijsf"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script async type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script async type="text/javascript" src="/js/src/fireworks.js"></script></body></html><!-- rebuild by neat -->